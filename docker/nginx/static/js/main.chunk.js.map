{"version":3,"sources":["main/return_chart.js","main/return_summary.js","main/ticker_configs.js","main/autocomplete.js","main/main.js","common.js","index.js"],"names":["window","d3","ReturnsChart","_React$Component","Object","inherits","_super","createSuper","props","_this","classCallCheck","this","call","state","tooltip_data","highlighted_idx","undefined","zoomTransform","graphSVG","React","createRef","graph_width","recalculateD3Paths","xScale","yScale","xAxisRef","xAxisGenerator","xAxisGridLinesRef","xAxisGridLinesGenerator","yAxisRef","yAxisGenerator","yAxisGridLinesRef","yAxisGridLinesGenerator","returnsLineRef","sp500LineRef","margin","bottom","top","left","right","zoom","scaleExtent","translateExtent","height","extent","on","zoomed","bind","assertThisInitialized","createClass","key","value","setState","transform","nextProps","nextState","nextContext","data","bars","config_hash","e","_step","x","pageX","target","getBoundingClientRect","date","invert","_iterator","createForOfIteratorHelper","monthly_data","entries","s","n","done","_step$value","slicedToArray","idx","month","date_start","date_end","Math","max","min","y","value_end_posttax","err","f","_this2","document","getElementById","clientWidth","range","domain","d","base","value_start_posttax","rescaleX","rescaleY","returns_line_generator","get_line_generator","sp500_line_generator","scale","ticks","tickSize","tickFormat","k","toFixed","return_field_name","_this3","defined","_this4","calculate_paths_with_d3","ttdata","react_default","a","createElement","Fragment","ref","width","onMouseMove","handle_mouseover","onMouseOut","handle_mouseout","className","stroke","id","x1","x2","y1","y2","style","strokeDasharray","fill","return_chart_ChartTickerTooltips","length","return_chart_ChartTooltip","current","attr","concat","datum","Component","ChartTickerTooltips","_super2","value_end_spy_posttax","ChartTooltip","_super3","_step2","toLocaleDateString","year","pl_percent","value_end_pretax","value_start_pretax","holdings","_iterator2","holding","push","name","join","pretax","colSpan","ReturnsSummary","selected_tab","selection","table","metrics","simulate_taxes","data_rows","metric","strategy","sp500","mdbreact_esm","hover","columns","label","field","rows","component_names","component","sort","_i","_component_names","component_name","_step3","_iterator3","toConsumableArray","reverse","_step4","row","data_row","returns","_iterator4","scrollY","correlations","onClick","switch_table","ticker_configs","ONES","start_year","early_replacement","early_monthly_index_replacement","suggest_in_search","tax_category","VTI","name_full","SPY","VFINX","QQQ","RYOCX","ESGV","VFTSX","IEFA","EFA","AAIEX","OPPAX","VEA","IEMG","EEM","TWMIX","MADCX","VWO","USMV","SPLV","EFAV","EEMV","VB","NAESX","VSS","VINEX","VNQ","RWR","DFREX","VNQI","RWX","IERBX","EGLRX","STMDX","REM","VMOT","QVAL","IVAL","QMOM","IMOM","VGIT","duration","VFITX","FGOVX","IEF","TLT","VUSTX","VWESX","SHY","TWUSX","TIP","VIPSX","BOND","BND","AGG","VBMFX","USAIX","LQD","MFBFX","VTC","VCSH","VFSTX","HYG","SPHIX","VTEB","MUB","VWITX","HYD","MMHYX","PTAEX","MBB","OMBAX","FMSFX","VMBS","CWB","PCONX","BNDX","PCY","FNMIX","VWOB","GLD","AutoCompleteField","search_options","display_name_to_ticker","ticker_to_display_name","_Object$entries","ticker","config","display_name","category","b","reason","handle_holding_update","console","log","Autocomplete","freeSolo","options","groupBy","option","renderOption","getOptionLabel","inputValue","classes","root","inputRoot","input","popper","onInputChange","event","sanitize_input_and_handle_update","renderInput","params","TextField","assign","variant","type","size","inputProps","objectSpread2","autoComplete","MainInterface","leverage","borrowing_costs","borrowing_costs_above_libor","borrowing_costs_selector","step","onChange","handle_config_update","autocomplete_AutoCompleteField","money_market_holding","handle_mmh_update","data-toggle","main_TaxConfig","handle_tax_rate_update","tax_type","rate","TaxConfig","config_to_name","fed_st_gains","state_st_gains","fed_lt_gains","state_lt_gains","selectors","_loop","_Object$entries$_i","_i2","tax_name","tax_rate","tax_rates","ComponentSelector","maxLength","disabled","handle_component_update","holding_boxes","_loop2","holding_id","dual_momentum","slice","includes","max_holdings","lookback","total_allocated_weight","weight","modify_number_of_holdings","MainView","_this5","_super4","config_is_valid","dm_config","data_load_error","costs_per_trade","momentum_leverages","months_for_leverage","0.8","0.85","0.9","0.95","1.3","1.2","1.15","1.1","1.05","dm_components","csrftoken","cookieValue","cookie","cookies","split","trim","substring","decodeURIComponent","getCookie","load_result_data","ename","parseInt","parseFloat","component_id","dm_component","modify_number_of_components","i","url_params","cur_stringified_config","json_stable_stringify","queryString","stringify","conf","history","pushState","fetch","then","response","json","forEach","element","date_str","Date","_this6","catch","_this7","_step2$value","isNaN","_loop3","_step3$value","main_ComponentSelector","main_MainInterface","return_chart_ReturnsChart","innerHeight","return_summary_ReturnsSummary","old_stringified_config","validate_config","errors","_step5","_iterator5","prevProps","prevState","snapshot","_this8","equal","stringified_config","setTimeout","update_url_if_no_change_after_2seconds","app_modules","ReactDOM"],"mappings":"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","file":"static/js/main.chunk.js","sourcesContent":["// for good d3 react zoom example, see\n// https://swizec.com/blog/two-ways-build-zoomable-dataviz-component-d3-zoom-react/swizec/7753\n\nimport React from 'react';\nimport PropTypes, {node} from 'prop-types';\n\nimport './return_chart.css'\n\nimport * as d3 from 'd3';\nwindow.d3 = d3;\n\n\nexport class ReturnsChart extends React.Component {\n    constructor(props){\n        super(props);\n\n        this.state = {\n            tooltip_data: null,\n            highlighted_idx: undefined,\n            zoomTransform: null,\n        };\n\n\n        // the main graph SVG\n        this.graphSVG = React.createRef();\n        this.graph_width = 800;\n        //     document.getElementById('components_row').clientWidth);\n        // document.getElementById('chart_row').clientWidth);\n\n        // if true, d3 paths are recalculated\n        this.recalculateD3Paths = true;\n\n        this.xScale = null;\n        this.yScale = null;\n\n        // reference to the xAxis group and d3 xAxis generator\n        this.xAxisRef = React.createRef();\n        this.xAxisGenerator = null;\n\n        // refernce to xAxisGrid group and generator (grid works like an axis)\n        this.xAxisGridLinesRef = React.createRef();\n        this.xAxisGridLinesGenerator = null;\n\n        // same for y axis\n        this.yAxisRef = React.createRef();\n        this.yAxisGenerator = null;\n        this.yAxisGridLinesRef = React.createRef();\n        this.yAxisGridLinesGenerator = null;\n\n        this.returnsLineRef = React.createRef();\n        this.sp500LineRef = React.createRef();\n\n        // margins of the element\n        this.margin = {\n            'bottom': 30,\n            'top': 30,\n            'left': 35,\n            'right': 30\n        };\n\n        this.zoom = d3.zoom()\n            // extent of the zoom (10% to 800%)\n            .scaleExtent([1, 8])\n            // limit dragging to areas with datapoints\n            .translateExtent([[-100, -100], [this.graph_width + 100, this.props.height+100]])\n            .extent([[-100, -100], [this.graph_width + 100, this.props.height + 100]])\n            .on(\"zoom\", this.zoomed.bind(this));\n    }\n    zoomed() {\n        this.setState({\n            zoomTransform: d3.event.transform\n        });\n    }\n\n\n    shouldComponentUpdate(nextProps, nextState, nextContext) {\n        // in shouldComponentUpdate, figure out if d3 paths need to be recalculated\n        // we don't recalculate here because the state is not yet updated (it is in render())\n\n        if (\n            // if zoom status changed, update paths during render\n            (this.state.zoomTransform !== nextState.zoomTransform) ||\n            // if we have data but no calculated bars yet, update paths during render\n            (nextProps.data && !this.bars) ||\n            // if the dual momentum config has changed (indicated by hash) -> update\n            (this.props.config_hash === nextProps.config_hash)\n        ){\n            this.recalculateD3Paths = true;\n        } else {\n            this.recalculateD3Paths = false;\n        }\n\n        // we always update the component, this function is here purely to determine if we need\n        // to recalculate d3 paths\n        return true\n    }\n\n    handle_mouseover(e) {\n        // on mouseover, figure out which bar to display data from in the tooltip\n        // the same bar is at the center of the crosshairs\n        const x = e.pageX - e.target.getBoundingClientRect().x;\n        const date = this.xScale.invert(x);\n\n        let highlighted_idx = null;\n        for (const [idx, month] of this.props.data.monthly_data.entries()){\n            if (month.date_start <= date && date <= month.date_end){\n                highlighted_idx = idx;\n                month.x = this.xScale(month.date_end);\n                month.x = Math.max(month.x, this.margin.left);\n                month.x = Math.min(month.x, this.graph_width - this.margin.left);\n                month.y = this.yScale(month.value_end_posttax);\n                month.y = Math.min(month.y, this.props.height - this.margin.top);\n                month.y = Math.max(month.y, this.margin.top);\n\n                this.setState({'tooltip_data': month, highlighted_idx: highlighted_idx});\n            }\n        }\n    }\n\n    handle_mouseout(){\n        this.setState({tooltip_data: null, highlighted_idx: undefined})}\n\n    calculate_paths_with_d3(){\n\n        // before rendering, use D3 to calculate the things that we will render with react and\n        // store them as local variables. In this case, that includes the bars in the charts.\n        // in addition, we are initializing the axes and bind them to local variables.\n        // we do this in shouldComponentUpdate because that allows us to calculate the paths\n        // that we need in the render function\n        // (I suppose we could also do the calculations in the render function but that clog up\n        // that code)\n        // importantly, the bars are not stored in the state because then we'd have to set the\n        // state with the newly calculated bars, triggering an infinite update cycle (each update\n        // leads to recalculation of the bars)\n\n        this.graph_width = Math.max(\n            document.getElementById('components_row').clientWidth,\n            document.getElementById('chart_row').clientWidth);\n\n        this.xScale = d3.scaleTime()\n            // margin left and right to avoid cutting off axis labels\n            .range([this.margin.left, this.graph_width - this.margin.right])\n            .domain(d3.extent(this.props.data.monthly_data, d => d.date_start));\n\n        this.yScale = d3.scaleLog().base(10)\n            .range([this.props.height - this.margin.top, this.margin.bottom])\n            .domain([\n                0.5 * d3.min(this.props.data.monthly_data, d => d.value_start_posttax),\n                1.5 * d3.max(this.props.data.monthly_data, d => d.value_end_posttax)]);\n\n        // update x and y scale with zoom/drag information\n        if (this.state.zoomTransform){\n            this.xScale.domain(this.state.zoomTransform.rescaleX(this.xScale).domain());\n            this.yScale.domain(this.state.zoomTransform.rescaleY(this.yScale).domain());\n        }\n\n        // get line generators for returns and benchmark\n        this.returns_line_generator = this.get_line_generator('value_end_posttax');\n        this.sp500_line_generator = this.get_line_generator('value_end_spy_posttax');\n\n        this.xAxisGenerator = d3.axisBottom().scale(this.xScale)\n            .ticks(10)\n            .tickSize(20)\n            .tickFormat((d) => (this.state.zoomTransform && this.state.zoomTransform.k > 4) ?\n                d3.timeFormat('%b %Y')(d): d3.timeFormat('%Y')(d));\n\n        // to create grid lines, we basically create an empty axis with \"ticks\" (i.e. the\n        // lines connecting the axis to the numbers) that run across the whole chart.\n        // the ticks are empty because we don't want to render axis labels for this \"axis\"\n        this.xAxisGridLinesGenerator = d3.axisBottom().scale(this.xScale)\n            .tickSize(-this.props.height + this.margin.top + this.margin.bottom)\n            .tickFormat('');\n\n        this.yAxisGenerator = d3.axisLeft().scale(this.yScale)\n            // if tick < 1, show 1 decimal point. otherwise round to full number.\n            .ticks(20, x => x < 1 ? x.toFixed(1) : x.toFixed(0));\n        this.yAxisGridLinesGenerator = d3.axisLeft().scale(this.yScale)\n            .tickSize(-this.graph_width + this.margin.left + this.margin.right)\n            .ticks(2)\n            .tickFormat('');\n    }\n\n    get_line_generator(return_field_name){\n        return d3.line()\n            .x(d => this.xScale(d.date_end))\n            .y(d => this.yScale(d[return_field_name]))\n\n            // defined can be used for clipping but it is choppy\n            .defined(d => {\n                const x = this.xScale(d.date_end);\n                const y = this.yScale(d[return_field_name]);\n                return (\n                    (x < this.graph_width - this.margin.right) &&\n                    (x > this.margin.left) &&\n                    (y < this.props.height - this.margin.top) &&\n                    (y > this.margin.bottom)\n                )\n            })\n    }\n\n    render() {\n        if (!this.props.data) {\n            return (<div/>);\n        } else {\n\n            if (this.recalculateD3Paths) {\n                this.calculate_paths_with_d3();\n            }\n\n            const ttdata = this.state.tooltip_data;\n\n\n            return (\n                <>\n                    <svg ref={this.graphSVG}\n                        width={this.graph_width}\n                        // width={800}\n                        height={this.props.height}\n                        onMouseMove={(e) => this.handle_mouseover(e)}\n                        onMouseOut={() => this.handle_mouseout()}\n                    >\n                        <g>\n                            <g ref={this.xAxisGridLinesRef} className={\"grid\"} />\n                            <g ref={this.yAxisGridLinesRef} className={\"grid\"} />\n                        </g>\n                        <g>\n                            {/*<path className={\"benchmark_line\"} d={this.sp500_line}*/}\n                            {/*    stroke={d3.schemeCategory10[1]}/>*/}\n                            {/*<path className={\"return_line\"} d={this.returns_line}*/}\n                            {/*    stroke={d3.schemeCategory10[0]}/>*/}\n                            <path ref={this.sp500LineRef} className={\"benchmark_line\"}\n                                stroke=\"#ff7f0e\"/>\n                            <path ref={this.returnsLineRef} className={\"return_line\"}\n                                stroke=\"#1f77b4\"/>\n                        </g>\n                        <g>\n                            <g ref={this.xAxisRef} />\n                            <g ref={this.yAxisRef} />\n                        </g>\n\n                        <g id={\"crosshairs\"}>\n\n                            <line\n                                // vertical line\n                                x1={ttdata ? ttdata.x : -1000}\n                                x2={ttdata ? ttdata.x : -1000}\n                                y1={this.margin.top}\n                                y2={this.props.height - this.margin.bottom}\n                                style={{'stroke': 'black', 'strokeDasharray': '4'}}\n                            />\n\n                            <line\n                                // horizontal line\n                                x1={this.margin.left}\n                                x2={this.graph_width - this.margin.right}\n                                // y data + height if loss\n                                y1={ttdata ? ttdata.y : -1000}\n                                y2={ttdata ? ttdata.y : -1000}\n                                style={{'stroke': 'black', 'strokeDasharray': '4'}}\n                            />\n                        </g>\n\n                        {/*My idea was to create a transparent rect that acts as the target for */}\n                        {/*mousemove. Before, moving the mouse over bars made the crosshairs */}\n                        {/*disappear. My idea was to bind mousemove to the top element,this rect.*/}\n                        {/*However, after adding this rect all of the mousemove actions triggered*/}\n                        {/*properly w/o having been bound to this rect. Not sure why...*/}\n                        <rect id={\"chart_mouseover_target\"}\n                            width={this.graph_width} height={this.props.height}\n                            style={{'fill': '#21252900'}}\n                        />\n                    </svg>\n                    <ChartTickerTooltips\n                        // if one month is highlighted, select data from that month. Otherwise\n                        // select the last month\n                        data={this.props.data.monthly_data[\n                            this.state.highlighted_idx ?\n                                this.state.highlighted_idx :\n                                this.props.data.monthly_data.length - 1\n                        ]}\n                    />\n                    <ChartTooltip\n                        tooltip_data={this.state.tooltip_data}\n                        // highlighted_idx={this.state.highlighted_idx}\n                    />\n                </>\n            )\n\n        }\n    }\n\n\n    componentDidUpdate() {\n\n        // componentDidUpdate fires AFTER render() in an update cycle\n        // this means that we have access to the rendered but empty xAxisRef group and can fill\n        // it with d3\n        d3.select(this.xAxisRef.current)\n            .call(this.xAxisGenerator)\n            // place at the bottom of the chart\n            .attr('transform', `translate(0, ${this.props.height - this.margin.bottom})`);\n\n        d3.select(this.xAxisGridLinesRef.current)\n            .call(this.xAxisGridLinesGenerator)\n            .attr('transform', `translate(0, ${this.props.height - this.margin.bottom})`);\n\n\n        d3.select(this.yAxisRef.current)\n            .call(this.yAxisGenerator)\n            .attr('transform', `translate(${this.margin.left}, 0)`);\n\n        d3.select(this.yAxisGridLinesRef.current)\n            .call(this.yAxisGridLinesGenerator)\n            .attr('transform', `translate(${this.margin.left}, 0)`);\n\n        // this.sp500_line = this.lineGenerator(this.props.data.monthly_data);\n\n        // path.datum(data).attr(\"d\", line);\n        d3.select(this.returnsLineRef.current)\n            .datum(this.props.data.monthly_data)\n            .attr(\"d\", this.returns_line_generator);\n\n        d3.select(this.sp500LineRef.current)\n            .datum(this.props.data.monthly_data)\n            .attr(\"d\", this.sp500_line_generator);\n\n        // on update ?? figure out new zoom state?? still not quite sure what this does...\n        d3.select(this.graphSVG.current)\n            .call(this.zoom);\n    }\n\n}\n\nReturnsChart.propTypes={\n    data: PropTypes.object,\n    data_load_error: PropTypes.string,\n    config_hash: PropTypes.string,\n    width: PropTypes.number.isRequired,\n    height: PropTypes.number.isRequired\n};\n\n\nclass ChartTickerTooltips extends React.Component{\n    constructor(props) {\n        super(props);\n    }\n\n    render(){\n        if(this.props.data) {\n            return (\n                <div id={\"ticker_boxes\"}>\n                    <div id={\"strategy_box\"} className={\"ticker_box\"}>\n                        <div>Strategy</div>\n                        <div className={\"ticker_box_value_div\"}>\n                            {(this.props.data.value_end_posttax * 100).toFixed(0) + \"%\"}\n                        </div>\n                    </div>\n                    <div id={\"benchmark_box\"} className={\"ticker_box\"}>\n                        <div>S&P 500</div>\n                        <div className={\"ticker_box_value_div\"}>\n                            {(this.props.data.value_end_spy_posttax * 100).toFixed(0) + \"%\"}\n                        </div>\n                    </div>\n                </div>\n            )\n        } else {\n            return <div/>\n        }\n    }\n}\nChartTickerTooltips.propTypes = {\n    data: PropTypes.object,\n};\n\n\nclass ChartTooltip extends React.Component{\n    constructor(props){\n        super(props);\n    }\n\n    render(){\n        if (this.props.tooltip_data){\n\n            const data = this.props.tooltip_data;\n            const date_start = data.date_start\n                .toLocaleDateString('en-US', {month: 'short', year:'numeric'});\n\n            const pl_percent = (((data.value_end_pretax / data.value_start_pretax) - 1) *\n                100).toFixed(3) +\"%\";\n\n            let holdings = [];\n            for (const holding of this.props.tooltip_data.holdings){\n                holdings.push(\n                    <tr key={holding.name}>\n                        <td>{holding.holdings.join(\", \")}</td>\n                        <td className={\"returns_col\"}>\n                            {((holding.pretax - 1) * 100).toFixed(3) + \"%\"}\n                        </td>\n                    </tr>)\n            }\n\n            return(\n                <div className={'chart_tooltip'}>\n                    <table className=\"table\">\n                        <tbody>\n                            <tr>\n                                <td colSpan={2}>{date_start}</td>\n                            </tr>\n                            <tr>\n                                <td>Return</td>\n                                <td className={\"returns_col\"}>{pl_percent}</td>\n                            </tr>\n                            {holdings}\n                        </tbody>\n                    </table>\n\n                </div>\n            )\n        } else {\n            return(\n                <div/>\n            )\n        }\n    }\n}\nChartTooltip.propTypes = {\n    tooltip_data: PropTypes.object\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport './return_summary.css'\nimport { MDBTable, MDBTableBody, MDBTableHead } from 'mdbreact';\n\n\n\nexport class ReturnsSummary extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            selected_tab: 'Summary'\n        }\n    }\n\n    switch_table(selection){\n        this.setState({'selected_tab': selection})\n    }\n\n    render() {\n        if (!this.props.data) {\n            return (<div/>);\n        } else {\n            let table;\n            let rows = [];\n            const d = this.props.data;\n\n            if (this.state.selected_tab === 'Summary') {\n                let metrics;\n                if (this.props.simulate_taxes) {\n                    metrics = [\n                        ['CAGR (Pretax)', 'cagr_', '_pretax_str'],\n                        ['CAGR (Posttax)', 'cagr_', '_posttax_str'],\n                        ['Total Returns (Pretax)', 'total_returns_', '_pretax'],\n                        ['Total Returns (Posttax)', 'total_returns_', '_posttax'],\n                        ['Max Drawdown ', 'max_dd_', '_pretax_str'],\n                        ['Max Drawdown Date ', 'max_dd_date_', '_pretax_str'],\n                        ['Sharpe', 'sharpe_', ''],\n                        ['Sortino', 'sortino_', ''],\n                        ['Annual Volatility', 'annual_volatility_', '_str']\n                    ];\n                } else {\n                    metrics = [\n                        ['CAGR', 'cagr_', '_pretax_str'],\n                        ['Total Returns', 'total_returns_', '_pretax'],\n                        ['Max Drawdown ', 'max_dd_', '_pretax_str'],\n                        ['Max Drawdown Date ', 'max_dd_date_', '_pretax_str'],\n                        ['Sharpe', 'sharpe_', ''],\n                        ['Sortino', 'sortino_', ''],\n                        ['Annual Volatility', 'annual_volatility_', '_str']\n                    ];\n                }\n\n                const columns = [\n                    {'label': 'Metric', 'field': 'metric'},\n                    {'label': 'Strategy', 'field': 'strategy'},\n                    {'label': 'S&P 500', 'field': 'sp500'}\n                ];\n\n                let data_rows = [];\n                for (const metric of metrics){\n                    data_rows.push(\n                        {\n                            'metric': metric[0],\n                            'strategy': d[`${metric[1]}strategy${metric[2]}`],\n                            'sp500': d[`${metric[1]}sp500${metric[2]}`]\n                        }\n                    )\n                }\n                table =\n                    <MDBTable hover>\n                        <MDBTableHead columns={columns}/>\n                        <MDBTableBody rows={data_rows}/>\n                    </MDBTable>;\n\n\n            } else  if (this.state.selected_tab === 'Monthly Holdings'){\n                const component_names = [];\n                for (const component of d.monthly_data[0].holdings){\n                    component_names.push(component.name);\n                }\n\n                const columns = [\n                    {'label': 'Date', 'field': 'date', 'sort': 'desc'},\n                    {'label': 'Return', 'field': 'returns'}\n                ];\n                for (const component_name of component_names){\n                    columns.push({'label': component_name, 'field': component_name})\n                }\n\n                let data_rows = [];\n                for (const row of [...d.monthly_data].reverse()){\n                    let data_row = {\n                        'date': row.date_start.toLocaleDateString('en-US',\n                            {month: 'short', year:'numeric'}),\n                        'returns': (((row.value_end_pretax / row.value_start_pretax) - 1) *\n                             100).toFixed(3) +\"%\",\n                    };\n                    for (const component of row.holdings){\n                        data_row[component.name] = component.holdings.join(\", \")\n                    }\n                    data_rows.push(data_row);\n                }\n                table =\n                    <MDBTable scrollY hover>\n                        <MDBTableHead columns={columns}/>\n                        <MDBTableBody rows={data_rows}/>\n                    </MDBTable>;\n            } else if (this.state.selected_tab === 'Correlations'){\n                table =\n                    <MDBTable hover>\n                        <MDBTableHead columns={this.props.data.correlations.columns}/>\n                        <MDBTableBody rows={this.props.data.correlations.data}/>\n                    </MDBTable>;\n            }\n\n            return (\n                <div>\n                    <ul className=\"nav nav-tabs\">\n                        <li className=\"nav-item\">\n                            <a\n                                className=\"nav-link\"\n                                onClick={() => this.switch_table('Summary')}\n                            >Summary</a>\n                        </li>\n                        <li className=\"nav-item\">\n                            <a\n                                className=\"nav-link\"\n                                onClick={() => this.switch_table('Monthly Holdings')}\n                            >Monthly Holdings</a>\n                        </li>\n                        <li className=\"nav-item\">\n                            <a\n                                className=\"nav-link\"\n                                onClick={() => this.switch_table('Correlations')}\n                            >Correlations</a>\n                        </li>\n\n                    </ul>\n                    {table}\n                </div>\n            );\n        }\n    }\n\n}\n\nReturnsSummary.propTypes={\n    data: PropTypes.object,\n    simulate_taxes: PropTypes.bool.isRequired\n};\n\n","\n\n\n// export const ticker_configs = {\n// \"U.S. Stock Market\": \"VTI\",\n// \"S&P 500\": \"SPY\",\n// \"Nasdaq 100\": \"QQQ\",\n// \"U.S. ESG Stocks\": \"ESGV\",\n// \"Developed Stock Markets (EAFE)\": \"IEFA\",\n// \"Emerging Stock Markets\": \"IEMG\",\n// \"U.S. Low Volatility Stocks\": \"USMV\",\n// \"Developed Markets Low Volatility Stocks\": \"EFAV\",\n// \"Developing Markets Low Volatility Stocks\": \"EEMV\",\n// \"U.S. Small Caps Stocks\": \"VB\",\n// \"All World ex-U.S. Small Caps Stocks\": \"VSS\",\n// \"U.S. Equities REITs\": \"VNQ\",\n// \"International Equities REITs\": \"VNQI\",\n// \"Alpha Architect Value Momentum Trend\": \"VMOT\",\n// \"U.S. Quantitative Value\": \"QVAL\",\n// \"International Quantitative Value\": \"IVAL\",\n// \"U.S. Quantitative Momentum\": \"QMOM\",\n// \"International Quantitative Momentum\": \"IMOM\",\n//\n// \"Intermediate (5-7 year) Treasuries\": \"VGIT\",\n// \"7-10 Year Treasury Bonds\": \"IEF\",\n// \"20+ Year Treasuries\": \"TLT\",\n// \"1-3 Year Treasury Bond\": \"SHY\"};\n\n\n\n\nexport const ticker_configs = {\n\n    \"ONES\": {\n        \"name\": \"Ones\",\n        \"start_year\": 1980,\n        \"early_replacement\": null,\n        \"early_monthly_index_replacement\": null,\n        \"suggest_in_search\": false,\n        \"tax_category\": \"equities\"\n    },\n\n    \"VTI\":  {\n        \"name\": \"U.S. Stock Market\",\n        \"name_full\": \"Vanguard Total Stock Market Index Fund ETF\",\n        \"start_year\": 2001,\n        \"early_replacement\": \"SPY\",\n        \"early_monthly_index_replacement\": null,\n        \"suggest_in_search\": true,\n        \"tax_category\": \"equities\"\n    },\n    \"SPY\": {\n        \"name\": \"S&P 500\",\n        \"name_full\": \"SPDR S&P 500 ETF \",\n        \"start_year\": 1993,\n        \"early_replacement\": \"VFINX\",\n        \"early_monthly_index_replacement\": null,\n        \"suggest_in_search\": true,\n        \"tax_category\": \"equities\"\n    },\n    \"VFINX\": {\n        \"name\": \"S&P 500 Mutual Fund\",\n        \"name_full\": \"Vanguard 500 Index Fund\",\n        \"start_year\": 1980,\n        \"early_replacement\": null,\n        \"early_monthly_index_replacement\": null,\n        \"suggest_in_search\": false,\n        \"tax_category\": \"equities\"\n    },\n    \"QQQ\": {\n        \"name\": \"Nasdaq 100\",\n        \"name_full\": \"Invesco QQQ Trust\",\n        \"start_year\": 1999,\n        \"early_replacement\": \"RYOCX\",\n        \"early_monthly_index_replacement\": null,\n        \"suggest_in_search\": true,\n        \"tax_category\": \"equities\"\n    },\n    \"RYOCX\": {\n        \"name\": \"Nasdaq 100 Mutual Fund\",\n        \"name_full\": \"Rydex NASDAQ-100 Fund\",\n        \"start_year\": 1994,\n        \"early_replacement\": \"ONES\",\n        \"early_monthly_index_replacement\": null,\n        \"suggest_in_search\": false,\n        \"tax_category\": \"equities\"\n    },\n\n    \"ESGV\": {\n        \"name\": \"U.S. ESG Stocks\",\n        \"name_full\": \"Vanguard Environmental, Social and Governance U.S. Stock ETF\",\n        \"start_year\": 2018,\n        \"early_replacement\": \"VFTSX\",\n        \"early_monthly_index_replacement\": null,\n        \"suggest_in_search\": true,\n        \"tax_category\": \"equities\"\n    },\n    \"VFTSX\": {\n        \"name\": \"Vanguard FTSE Social Index Fund\",\n        \"start_year\": 2000,\n        \"early_replacement\": \"VTI\",\n        \"early_monthly_index_replacement\": null,\n        \"suggest_in_search\": false,\n        \"tax_category\": \"equities\"\n    },\n\n\n    \"IEFA\": {\n        \"name\": \"Developed Stock Markets\",\n        \"start_year\": 2012,\n        \"early_replacement\": \"EFA\",\n        \"early_monthly_index_replacement\": null,\n        \"suggest_in_search\": true,\n        \"tax_category\": \"equities\"\n    },\n    \"EFA\": {\n        \"name\": \"Developed Stock Markets (EAFE)\",\n        \"start_year\": 2001,\n        \"early_replacement\": \"AAIEX\",\n        \"early_monthly_index_replacement\": null,\n        \"suggest_in_search\": false,\n        \"tax_category\": \"equities\"\n    },\n    \"AAIEX\": {\n        \"name\": \"American Beacon International Equity\",\n        \"start_year\": 1996,\n        \"early_replacement\": \"OPPAX\",\n        \"early_monthly_index_replacement\": null,\n        \"suggest_in_search\": false,\n        \"tax_category\": \"equities\"\n    },\n    \"OPPAX\": {\n        \"name\": \"Oppenheimer Global Fund\",\n        \"start_year\": 1980,\n        \"early_replacement\": null,\n        \"early_monthly_index_replacement\": null,\n        \"suggest_in_search\": false,\n        \"tax_category\": \"equities\"\n    },\n    \"VEA\": {\n        \"name\": \"Developed Stock Markets\",\n        \"name_full\": \"Vanguard FTSE Developed Markets Index Fund ETF\",\n        \"start_year\": 2007,\n        \"early_replacement\": \"EFA\",\n        \"early_monthly_index_replacement\": null,\n        \"suggest_in_search\": false,\n        \"tax_category\": \"equities\"\n    },\n\n\n    \"IEMG\": {\n        \"name\": \"Emerging Stock Markets\",\n        \"name_full\": \"iShares Core MSCI Emerging Markets ETF\",\n        \"start_year\": 2012,\n        \"early_replacement\": \"EEM\",\n        \"early_monthly_index_replacement\": null,\n        \"suggest_in_search\": true,\n        \"tax_category\": \"equities\"\n    },\n    \"EEM\": {\n        \"name\": \"iShares MSCI Emerging Markets ETF\",\n        \"start_year\": 2003,\n        \"early_replacement\": \"TWMIX\",\n        \"early_monthly_index_replacement\": null,\n        \"suggest_in_search\": false,\n        \"tax_category\": \"equities\"\n    },\n    \"TWMIX\": {\n        \"name\": \"American Century Emerging Markets Fund\",\n        \"start_year\": 1997,\n        \"early_replacement\": \"MADCX\",\n        \"early_monthly_index_replacement\": null,\n        \"suggest_in_search\": false,\n        \"tax_category\": \"equities\"\n    },\n    \"MADCX\": {\n        \"name\": \"BlackRock Emerging Markets Fund, Inc.\",\n        \"start_year\": 1989,\n        \"early_replacement\": \"ONES\",\n        \"early_monthly_index_replacement\": null,\n        \"suggest_in_search\": false,\n        \"tax_category\": \"equities\"\n    },\n    \"VWO\": {\n        \"name\": \"Vanguard FTSE Emerging Markets Index Fund\",\n        \"start_year\": 2005,\n        \"early_replacement\": \"EEM\",\n        \"early_monthly_index_replacement\": null,\n        \"suggest_in_search\": false,\n        \"tax_category\": \"equities\"\n    },\n\n\n    \"USMV\": {\n        \"name\": \"U.S. Low Volatility Stocks\",\n        \"name_full\": \"iShares Edge MSCI Min Vol USA ETF\",\n        \"start_year\": 2011,\n        \"early_replacement\": \"SPLV\",\n        \"early_monthly_index_replacement\": null,\n        \"suggest_in_search\": true,\n        \"tax_category\": \"equities\"\n    },\n    \"SPLV\": {\n        \"name\": \"iShares Edge MSCI Min Vol USA\",\n        \"start_year\": 2011,\n        \"early_replacement\": \"VTI\",\n        \"early_monthly_index_replacement\": null,\n        \"suggest_in_search\": false,\n        \"tax_category\": \"equities\"\n    },\n    \"EFAV\": {\n        \"name\": \"Developed Markets Low Volatility Stocks\",\n        \"name_full\": \"iShares Edge MSCI Min Vol EAFE ETF\",\n        \"start_year\": 2011,\n        \"early_replacement\": \"EFA\",\n        \"early_monthly_index_replacement\": null,\n        \"suggest_in_search\": true,\n        \"tax_category\": \"equities\"\n    },\n    \"EEMV\": {\n        \"name\": \"Developing Markets Low Volatility Stocks\",\n        \"start_year\": 2011,\n        \"early_replacement\": \"EEM\",\n        \"early_monthly_index_replacement\": null,\n        \"suggest_in_search\": true,\n        \"tax_category\": \"equities\"\n    },\n\n    \"VB\": {\n        \"name\": \"U.S. Small Caps Stocks\",\n        \"name_full\": \"Vanguard Small-Cap Index Fund ETF\",\n        \"start_year\": 2004,\n        \"early_replacement\": \"NAESX\",\n        \"early_monthly_index_replacement\": null,\n        \"suggest_in_search\": true,\n        \"tax_category\": \"equities\"\n    },\n    \"NAESX\": {\n        \"name\": \"Vanguard Small Capitalization Index Fund\",\n        \"start_year\": 1980,\n        \"early_replacement\": null,\n        \"early_monthly_index_replacement\": null,\n        \"suggest_in_search\": false,\n        \"tax_category\": \"equities\"\n    },\n\n    \"VSS\": {\n        \"name\": \"All World ex-U.S. Small Caps Stocks\",\n        \"name_full\": \"Vanguard Small Capitalization Index Fund\",\n        \"start_year\": 2009,\n        \"early_replacement\": \"VINEX\",\n        \"early_monthly_index_replacement\": null,\n        \"suggest_in_search\": true,\n        \"tax_category\": \"equities\"\n    },\n    \"VINEX\": {\n        \"name\": \"Vanguard International Explorer Fund\",\n        \"start_year\": 1996,\n        \"early_replacement\": \"ONES\",\n        \"early_monthly_index_replacement\": null,\n        \"suggest_in_search\": false,\n        \"tax_category\": \"equities\"\n    },\n\n\n    \"VNQ\": {\n        \"name\": \"U.S. Equity REITs\",\n        \"start_year\": 2004,\n        \"early_replacement\": \"RWR\",\n        \"early_monthly_index_replacement\": \"eq_reit.csv\",\n        \"suggest_in_search\": true,\n        \"tax_category\": \"reits\"\n    },\n    \"RWR\": {\n        \"name\": \"U.S. Equities REITs\",\n        \"start_year\": 2001,\n        \"early_replacement\": \"DFREX\",\n        \"early_monthly_index_replacement\": \"eq_reit.csv\",\n        \"suggest_in_search\": false,\n        \"tax_category\": \"reits\"\n    },\n    \"DFREX\": {\n        \"name\": \"DFA Real Estate Securities\",\n        \"start_year\": 1993,\n        \"early_replacement\": null,\n        \"early_monthly_index_replacement\": \"eq_reit.csv\",\n        \"suggest_in_search\": false,\n        \"tax_category\": \"reits\"\n    },\n\n    \"VNQI\": {\n        \"name\": \"International Equity REITs\",\n        \"name_full\": \"Vanguard Global ex-US Real Estate Index Fund\",\n        \"start_year\": 2010,\n        \"early_replacement\": \"RWX\",\n        \"early_monthly_index_replacement\": null,\n        \"suggest_in_search\": true,\n        \"tax_category\": \"reits\"\n    },\n    \"RWX\": {\n        \"name\": \"SPDR Dow Jones International Real Estate ETF\",\n        \"start_year\": 2006,\n        \"early_replacement\": \"IERBX\",\n        \"early_monthly_index_replacement\": null,\n        \"suggest_in_search\": false,\n        \"tax_category\": \"reits\"\n    },\n    \"IERBX\": {\n        \"name\": \"Morgan Stanley International Fund, Inc. International Real Estate Portfolio\",\n        \"start_year\": 1997,\n        \"early_replacement\": \"EGLRX\",\n        \"early_monthly_index_replacement\": null,\n        \"suggest_in_search\": false,\n        \"tax_category\": \"reits\"\n    },\n    \"EGLRX\": {\n        \"name\": \"Aberdeen International Real Estate Equity Fund\",\n        \"start_year\": 1989,\n        \"early_replacement\": \"STMDX\",\n        \"early_monthly_index_replacement\": null,\n        \"suggest_in_search\": false,\n        \"tax_category\": \"reits\"\n    },\n    \"STMDX\": {\n        \"name\": \"Sterling Capital Stratton Real Estate Fund\",\n        \"start_year\": 1980,\n        \"early_replacement\": null,\n        \"early_monthly_index_replacement\": null,\n        \"suggest_in_search\": false,\n        \"tax_category\": \"reits\"\n    },\n\n    \"REM\": {\n        \"name\": \"U.S. Mortgage REITs\",\n        \"name_full\": \"iShares Mortgage Real Estate Capped ETF\",\n        \"start_year\": 2007,\n        \"early_replacement\": null,\n        \"early_monthly_index_replacement\": \"mortgage_reit.csv\",\n        \"suggest_in_search\": true,\n        \"tax_category\": \"reits\"\n    },\n    \"VMOT\": {\n        \"name\": \"Alpha Architect Value Momentum Trend\",\n        \"start_year\": 2017,\n        \"early_replacement\": null,\n        \"early_monthly_index_replacement\": \"eq_vmot.csv\",\n        \"suggest_in_search\": true,\n        \"tax_category\": \"equities\"\n    },\n    \"QVAL\": {\n        \"name\": \"U.S. Quantitative Value\",\n        \"start_year\": 2014,\n        \"early_replacement\": null,\n        \"early_monthly_index_replacement\": \"alpha_architect.csv\",\n        \"suggest_in_search\": true,\n        \"tax_category\": \"equities\"\n    },\n    \"IVAL\": {\n        \"name\": \"International Quantitative Value\",\n        \"start_year\": 2014,\n        \"early_replacement\": null,\n        \"early_monthly_index_replacement\": \"alpha_architect.csv\",\n        \"suggest_in_search\": true,\n        \"tax_category\": \"equities\"\n    },\n    \"QMOM\": {\n        \"name\": \"U.S. Quantitative Momentum\",\n        \"start_year\": 2015,\n        \"early_replacement\": null,\n        \"early_monthly_index_replacement\": \"alpha_architect.csv\",\n        \"suggest_in_search\": true,\n        \"tax_category\": \"equities\"\n    },\n    \"IMOM\": {\n        \"name\": \"International Quantitative Momentum\",\n        \"start_year\": 2015,\n        \"early_replacement\": null,\n        \"early_monthly_index_replacement\": \"alpha_architect.csv\",\n        \"suggest_in_search\": true,\n        \"tax_category\": \"equities\"\n    },\n\n    \"VGIT\": {\n        \"name\": \"U.S. Treasuries, 5-7 Years\",\n        \"name_full\": \"Vanguard Intermediate-Term Treasury Fund ETF\",\n        \"start_year\": 2009,\n        \"early_replacement\": \"VFITX\",\n        \"early_monthly_index_replacement\": null,\n        \"suggest_in_search\": true,\n        \"duration\": 5,\n        \"tax_category\": \"bonds_treasury\"\n    },\n    \"VFITX\": {\n        \"name\": \"Intermediate (5-7 year) Treasuries Mutual Fund\",\n        \"start_year\": 1991,\n        \"early_replacement\": \"FGOVX\",\n        \"early_monthly_index_replacement\": null,\n        \"suggest_in_search\": false,\n        \"duration\": 5,\n        \"tax_category\": \"bonds_treasury\"\n    },\n    \"FGOVX\": {\n        \"name\": \"Fidelity Goverment Income Fund\",\n        \"start_year\": 1980,\n        \"early_replacement\": null,\n        \"early_monthly_index_replacement\": null,\n        \"suggest_in_search\": false,\n        \"duration\": 6,\n        \"tax_category\": \"bonds_treasury\"\n    },\n\n    \"IEF\": {\n        \"name\": \"U.S. Treasuries, 7-10 Years\",\n        \"start_year\": 2002,\n        \"early_replacement\": \"VFITX\",\n        \"early_monthly_index_replacement\": null,\n        \"suggest_in_search\": true,\n        \"duration\": 8,\n        \"tax_category\": \"bonds_treasury\"\n    },\n\n    \"TLT\": {\n        \"name\": \"U.S. Treasuries, 20+ Years\",\n        \"name_full\": \"iShares 20+ Year Treasury Bond ETF\",\n        \"start_year\": 2002,\n        \"early_replacement\": \"VUSTX\",\n        \"early_monthly_index_replacement\": null,\n        \"suggest_in_search\": true,\n        \"duration\": 17,\n        \"tax_category\": \"bonds_treasury\"\n    },\n    \"VUSTX\": {\n        \"name\": \"Vanguard Long Term Treasury Fund\",\n        \"start_year\": 1986,\n        \"early_replacement\": \"VWESX\",\n        \"early_monthly_index_replacement\": null,\n        \"suggest_in_search\": false,\n        \"duration\": 17,\n        \"tax_category\": \"bonds_treasury\"\n    },\n\n    \"VWESX\": {\n        \"name\": \"Vanguard Long Term Investment Grade Fund\",\n        \"start_year\": 1980,\n        \"early_replacement\": null,\n        \"early_monthly_index_replacement\": null,\n        \"suggest_in_search\": false,\n        \"tax_category\": \"bonds_other\"\n    },\n\n    \"SHY\": {\n        \"name\": \"U.S. Treasuries, 1-3 Year\",\n        \"name_full\": \"iShares 1-3 Year Treasur Bond ETF\",\n        \"start_year\": 2003,\n        \"early_replacement\": \"TWUSX\",\n        \"early_monthly_index_replacement\": null,\n        \"suggest_in_search\": true,\n        \"duration\": 2,\n        \"tax_category\": \"bonds_treasury\"\n    },\n    \"TWUSX\": {\n        \"name\": \"American Century Short Term Government Fund\",\n        \"start_year\": 1982,\n        \"early_replacement\": \"FGOVX\",\n        \"early_monthly_index_replacement\": null,\n        \"suggest_in_search\": false,\n        \"tax_category\": \"bonds_treasury\"\n    },\n\n    \"TIP\": {\n        \"name\": \"U.S. Treasuries, Inflation Protected\",\n        \"name_full\": \"iShares TIPS Bond ETF\",\n        \"start_year\": 2003,\n        \"early_replacement\": \"VIPSX\",\n        \"early_monthly_index_replacement\": null,\n        \"suggest_in_search\": true,\n        \"duration\": 7,\n        \"tax_category\": \"bonds_treasury\"\n    },\n    \"VIPSX\": {\n        \"name\": \"Vanguard Inflation-Protected Securities Fund\",\n        \"start_year\": 2000,\n        \"early_replacement\": \"ONES\",\n        \"early_monthly_index_replacement\": null,\n        \"suggest_in_search\": false,\n        \"duration\": 7,\n        \"tax_category\": \"bonds_treasury\"\n    },\n\n\n    \"BOND\": {\n        \"name\": \"PIMCO Active Bond ETF\",\n        \"start_year\": 2012,\n        \"early_replacement\": \"AGG\",\n        \"early_monthly_index_replacement\": null,\n        \"suggest_in_search\": false,\n        \"duration\": 5,\n        \"tax_category\": \"bonds_other\"\n    },\n    \"BND\": {\n        \"name\": \"Total U.S. Bond Market\",\n        \"name_full\": \"Vanguard Total Bond Market ETF\",\n        \"start_year\": 2007,\n        \"early_replacement\": \"AGG\",\n        \"early_monthly_index_replacement\": null,\n        \"suggest_in_search\": true,\n        \"duration\": 6,\n        \"tax_category\": \"bonds_other\"\n    },\n    \"AGG\": {\n        \"name\": \"iShares Core U.S. Aggregate Bond ETF\",\n        \"start_year\": 2003,\n        \"early_replacement\": \"VBMFX\",\n        \"early_monthly_index_replacement\": null,\n        \"suggest_in_search\": false,\n        \"duration\": 6,\n        \"tax_category\": \"bonds_other\"\n    },\n    \"VBMFX\": {\n        \"name\": \"Vanguard Total Bond Market Fund\",\n        \"start_year\": 1986,\n        \"early_replacement\": \"USAIX\",\n        \"early_monthly_index_replacement\": null,\n        \"suggest_in_search\": false,\n        \"duration\": 6,\n        \"tax_category\": \"bonds_other\"\n    },\n\n    \"USAIX\": {\n        \"name\": \"USAA Income Fund\",\n        \"start_year\": 1980,\n        \"early_replacement\": null,\n        \"early_monthly_index_replacement\": null,\n        \"suggest_in_search\": false,\n        \"duration\": 6,\n        \"tax_category\": \"bonds_other\"\n    },\n\n    \"LQD\": {\n        \"name\": \"U.S. Inv Grade Corporate Bonds\",\n        \"name_full\": \"iShares iBoxx $ Investment Grade Corporate Bond ETF\",\n        \"start_year\": 2002,\n        \"early_replacement\": \"MFBFX\",\n        \"early_monthly_index_replacement\": null,\n        \"suggest_in_search\": true,\n        \"duration\": 9,\n        \"tax_category\": \"bonds_other\"\n    },\n    \"MFBFX\": {\n        \"name\": \"MFS Corporate Bond Fund\",\n        \"start_year\": 1980,\n        \"early_replacement\": null,\n        \"early_monthly_index_replacement\": null,\n        \"suggest_in_search\": false,\n        \"duration\": 8,\n        \"tax_category\": \"bonds_other\"\n    },\n    \"VTC\": {\n        \"name\": \"Vanguard Total Corporate Bond ETF\",\n        \"start_year\": 2017,\n        \"early_replacement\": \"LQD\",\n        \"early_monthly_index_replacement\": null,\n        \"suggest_in_search\": false,\n        \"duration\": 8,\n        \"tax_category\": \"bonds_other\"\n    },\n\n    \"VCSH\": {\n        \"name\": \"U.S. Inv Grade Short-Term Corporate Bonds\",\n        \"name_full\": \"Vanguard Short-Term Corporate Bond Index Fund\",\n        \"start_year\": 2009,\n        \"early_replacement\": \"VFSTX\",\n        \"early_monthly_index_replacement\": null,\n        \"suggest_in_search\": true,\n        \"duration\": 3,\n        \"tax_category\": \"bonds_other\"\n    },\n    \"VFSTX\": {\n        \"name\": \"Vanguard Short-Term Investment-Grade Fund\",\n        \"start_year\": 1983,\n        \"early_replacement\": \"ONES\",\n        \"early_monthly_index_replacement\": null,\n        \"suggest_in_search\": false,\n        \"duration\": 2,\n        \"tax_category\": \"bonds_other\"\n    },\n\n\n\n    \"HYG\": {\n        \"name\": \"U.S. High Yield Corporate Bonds\",\n        \"name_full\": \"iShares iBoxx $ High Yield Corporate Bond ETF\",\n        \"start_year\": 2007,\n        \"early_replacement\": \"SPHIX\",\n        \"early_monthly_index_replacement\": null,\n        \"suggest_in_search\": true,\n        \"duration\": 3,\n        \"tax_category\": \"bonds_other\"\n    },\n    \"SPHIX\": {\n        \"name\": \"Fidelity High Income Fund\",\n        \"start_year\": 1990,\n        \"early_replacement\": \"ONES\",\n        \"early_monthly_index_replacement\": null,\n        \"suggest_in_search\": false,\n        \"duration\": 3,\n        \"tax_category\": \"bonds_other\"\n    },\n\n\n    \"VTEB\": {\n        \"name\": \"U.S. Municipal Bonds\",\n        \"name_full\": \"Vanguard Tax-Exempt Bond Index Fund\",\n        \"start_year\": 2015,\n        \"early_replacement\": \"MUB\",\n        \"early_monthly_index_replacement\": null,\n        \"suggest_in_search\": true,\n        \"duration\": 5,\n        \"tax_category\": \"bonds_muni\"\n    },\n    \"MUB\": {\n        \"name\": \"iShares National Muni Bond ETF\",\n        \"start_year\": 2007,\n        \"early_replacement\": \"VWITX\",\n        \"early_monthly_index_replacement\": null,\n        \"suggest_in_search\": false,\n        \"duration\": 6,\n        \"tax_category\": \"bonds_muni\"\n    },\n    \"VWITX\": {\n        \"name\": \"Vanguard Intermediate-Term Tax-Exempt Fund Investor Shares\",\n        \"start_year\": 1980,\n        \"early_replacement\": null,\n        \"early_monthly_index_replacement\": null,\n        \"suggest_in_search\": false,\n        \"duration\": 5,\n        \"tax_category\": \"bonds_muni\"\n    },\n\n    \"HYD\": {\n        \"name\": \"U.S. High-Yield Municipal Bonds\",\n        \"name_full\": \"VanEck Vectors High-Yield Municipal Index ETF\",\n        \"start_year\": 2009,\n        \"early_replacement\": \"MMHYX\",\n        \"early_monthly_index_replacement\": null,\n        \"suggest_in_search\": true,\n        \"duration\": 7,\n        \"tax_category\": \"bonds_muni\"\n    },\n    \"MMHYX\": {\n        \"name\": \"MFS Municipal High Income Fund\",\n        \"start_year\": 1984,\n        \"early_replacement\": \"PTAEX\",\n        \"early_monthly_index_replacement\": null,\n        \"suggest_in_search\": false,\n        \"duration\": 7,\n        \"tax_category\": \"bonds_muni\"\n    },\n    \"PTAEX\": {\n        \"name\": \"Putnam Tax Exempt Income\",\n        \"start_year\": 1980,\n        \"early_replacement\": null,\n        \"early_monthly_index_replacement\": null,\n        \"suggest_in_search\": false,\n        \"duration\": 7,\n        \"tax_category\": \"bonds_muni\"\n    },\n\n\n    \"MBB\": {\n        \"name\": \"U.S. Mortgage-Backed Securities\",\n        \"name_full\": \"iShares MBS ETF\",\n        \"start_year\": 2007,\n        \"early_replacement\": \"OMBAX\",\n        \"early_monthly_index_replacement\": null,\n        \"suggest_in_search\": true,\n        \"duration\": 3,\n        \"tax_category\": \"bonds_other\"\n    },\n    \"OMBAX\": {\n        \"name\": \"JPMorgan Mortgage-Backed Securities Fund\",\n        \"start_year\": 2000,\n        \"early_replacement\": \"FMSFX\",\n        \"early_monthly_index_replacement\": null,\n        \"suggest_in_search\": false,\n        \"duration\": 3,\n        \"tax_category\": \"bonds_other\"\n    },\n    \"FMSFX\": {\n        \"name\": \"\",\n        \"start_year\": 1984,\n        \"early_replacement\": \"ONES\",\n        \"early_monthly_index_replacement\": null,\n        \"suggest_in_search\": false,\n        \"duration\": 3,\n        \"tax_category\": \"bonds_other\"\n    },\n    \"VMBS\": {\n        \"name\": \"Vanguard Mortgage-Backed Securities Index Fund\",\n        \"start_year\": 2009,\n        \"early_replacement\": \"MBB\",\n        \"early_monthly_index_replacement\": null,\n        \"suggest_in_search\": false,\n        \"duration\": 4,\n        \"tax_category\": \"bonds_other\"\n    },\n\n\n    \"CWB\": {\n        \"name\": \"U.S. Convertible Bonds\",\n        \"start_year\": 2009,\n        \"early_replacement\": \"PCONX\",\n        \"early_monthly_index_replacement\": null,\n        \"suggest_in_search\": true,\n        \"tax_category\": \"bonds_other\"\n    },\n    \"PCONX\": {\n        \"name\": \"Putnam Convertible Securities Fund\",\n        \"start_year\": 1980,\n        \"early_replacement\": null,\n        \"early_monthly_index_replacement\": null,\n        \"suggest_in_search\": false,\n        \"tax_category\": \"bonds_other\"\n    },\n\n    \"BNDX\": {\n        \"name\": \"Total International Bond Market\",\n        \"start_year\": 2013,\n        \"early_replacement\": \"ONES\",\n        \"early_monthly_index_replacement\": null,\n        \"suggest_in_search\": true,\n        \"tax_category\": \"bonds_other\"\n    },\n\n\n    \"PCY\": {\n        \"name\": \"Emerging Markets Government Bonds\",\n        \"name_full\": \"Invesco Emerging Markets Sovereign Debt ETF\",\n        \"start_year\": 2007,\n        \"early_replacement\": \"FNMIX\",\n        \"early_monthly_index_replacement\": null,\n        \"suggest_in_search\": true,\n        \"duration\": 10,\n        \"tax_category\": \"bonds_other\"\n    },\n    \"FNMIX\": {\n        \"name\": \"Fidelity New Markets Income Fund\",\n        \"start_year\": 1993,\n        \"early_replacement\": \"ONES\",\n        \"early_monthly_index_replacement\": null,\n        \"suggest_in_search\": false,\n        \"duration\": 6,\n        \"tax_category\": \"bonds_other\"\n    },\n    \"VWOB\": {\n        \"name\": \"Vanguard Emerging Markets Government Bond Index Fund\",\n        \"start_year\": 2013,\n        \"early_replacement\": \"PCY\",\n        \"early_monthly_index_replacement\": null,\n        \"suggest_in_search\": false,\n        \"duration\": 8,\n        \"tax_category\": \"bonds_other\"\n    },\n\n\n    \"GLD\": {\n        \"name\": \"Gold\",\n        \"name_full\": \"SPDR Gold Shares\",\n        \"start_year\": 2004,\n        \"early_replacement\": null,\n        \"early_monthly_index_replacement\": \"gold_bullion.csv\",\n        \"suggest_in_search\": true,\n        \"tax_category\": \"collectibles\"\n    }\n};\n","import {Autocomplete} from \"@material-ui/lab\";\nimport {TextField} from \"@material-ui/core\";\nimport React from \"react\";\n\nimport './autocomplete.css'\nimport {ticker_configs} from \"./ticker_configs\";\n\n\nimport PropTypes from 'prop-types';\n\n\nexport class AutoCompleteField extends React.Component {\n\n    constructor(props){\n        super(props);\n        //unpack ticker data and only retain those that should be suggested in search\n        this.search_options = [];           // array of options to display\n        this.display_name_to_ticker = {};   // map from displayed name to actual ticker\n        this.ticker_to_display_name = {};   // map from ticker to display name\n\n        for (const d of Object.entries(ticker_configs)) {\n            const ticker = d[0];\n            const config = d[1];\n            if (config.suggest_in_search){\n                const display_name = `${config.name} (${ticker})`;\n                this.search_options.push({\n                    'ticker': ticker,\n                    'name': config.name,\n                    'category': config.tax_category,\n                    'display_name': display_name\n                });\n                this.display_name_to_ticker [display_name] = ticker;\n                this.ticker_to_display_name[ticker] = display_name;\n            }\n        }\n\n        // sort by category and ticker\n        this.search_options.sort(function (a, b) {\n            if (a.category > b.category) return 1;\n            if (a.category < b.category) return -1;\n            if (a.ticker > b.ticker) return 1;\n            if (a.ticker < b.ticker) return -1;\n        });\n    }\n\n    sanitize_input_and_handle_update(reason, value) {\n\n        // on input, update values\n        if (reason === 'input'){\n            this.props.handle_holding_update(value);\n\n\n        // clear gets triggered when the user clicks the clear button -> empty field\n        } else if (reason === 'clear') {\n            this.props.handle_holding_update('');\n\n        // reset gets triggered on re-renders or when a ticker has been selected from the\n        //dropdown\n        } else if (reason === 'reset') {\n            const ticker = this.display_name_to_ticker[value];\n            if (ticker !== undefined) {\n                console.log(\"ticker\", ticker);\n                this.props.handle_holding_update(ticker);\n            }\n        }\n    }\n\n\n    render(){\n        return(\n\n            <Autocomplete\n                // allow options outside of suggestions, e.g. stocks not in list\n                freeSolo\n\n                // what options to display\n                options={this.search_options}\n\n                // group options by category\n                groupBy={option => option.category}\n\n                // in selection dropdown, display as 2 spans for vertical alignment\n                renderOption={option => (\n                    <React.Fragment>\n                        <span className=\"ticker_span\">{option.ticker}</span>\n                        <span>{option.name}</span>\n                    </React.Fragment>\n                )}\n\n                // what to display once an option has been selected. Has to be a\n                // string because it's an input field\n                getOptionLabel={option => option.display_name}\n\n                // the initial input\n                inputValue={\n                    (this.props.ticker in this.ticker_to_display_name) ?\n                        this.ticker_to_display_name[this.props.ticker] :\n                        this.props.ticker\n                }\n\n                // clear when user presses Escape\n                // clearOnEscape={true}\n\n                // what classes to apply to the different html entitites created by\n                // autocomplete (see https://material-ui.com/api/autocomplete/)\n                classes={{\n                    root: \"ticker_selector_root\",\n                    inputRoot: \"ticker_selector_inputroot\",\n                    input: \"ticker_selector_input\",\n                    popper: \"ticker_selector_popper\"\n                }}\n                onInputChange={(event, value, reason) => {\n                    this.sanitize_input_and_handle_update(reason, value);\n                }}\n                renderInput={params => (\n                    <TextField\n                        {...params}\n                        margin=\"none\"\n                        variant=\"filled\"\n                        type=\"text\"\n                        size=\"small\"\n                        inputProps={{\n                            ...params.inputProps,\n                            autoComplete: 'new-password', // disable autocomplete and autofill\n                        }}\n                    />)}\n            />\n\n\n        )\n    }\n}\nAutoCompleteField.propTypes = {\n    ticker: PropTypes.string.isRequired,\n    handle_holding_update: PropTypes.func.isRequired\n};\n\n","/**\n * UI Code for the visualization\n */\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nimport queryString from 'query-string';\n\nimport * as json_stable_stringify from 'json-stable-stringify';\n\nimport {ReturnsChart} from \"./return_chart\";\nimport {ReturnsSummary} from \"./return_summary\";\nimport {AutoCompleteField} from \"./autocomplete\";\n\nimport {ticker_configs} from \"./ticker_configs\";\n\nimport equal from \"fast-deep-equal/es6/react\";\n\nimport { getCookie } from '../common'\nimport './main.css';\n\n\nclass MainInterface extends React.Component {\n    constructor(props){\n        super(props)\n    }\n\n    render(){\n        const leverage = this.props.config.leverage;\n        const borrowing_costs = this.props.config.borrowing_costs_above_libor;\n        const start_year = this.props.config.start_year;\n\n        let borrowing_costs_selector = null;\n        if (leverage > 1) {\n            borrowing_costs_selector = [\n                <div key=\"borrow\" className=\"col-xl-6 col-lg-4 col-md-6 col-sm-6 col-xs-12\">\n                    <div className=\"input-group input-group-sm mb-1\">\n                        <div className=\"input-group-prepend\">\n                            <span className=\"input-group-text tax_type_name\">\n                                Margin rate (+LIBOR)\n                            </span>\n                        </div>\n                        <input\n                            className={\"form-control rem-5\" + ((borrowing_costs >= 0.00 &&\n                                borrowing_costs < 100) ? \"\" : \"is-invalid\")}\n                            type=\"number\" name=\"borrowing_costs_above_libor\"\n                            min={0} max={100} step={0.01}\n                            value={borrowing_costs}\n                            onChange={(e) => this.props.handle_config_update(e)}\n                        />\n                        <div className=\"input-group-append\">\n                            <span className=\"input-group-text\">%</span>\n                        </div>\n                        <div className=\"invalid-feedback\">\n                            Borrowing costs have to be between 0% and 100%.\n                        </div>\n                    </div>\n                </div>\n            ];\n        }\n\n        return(\n            <div className={\"row width-95\"}>\n                <div className={\"col-12\"}>\n                    <div className={\"row inner_config_row pt-4\"}>\n                        {/*Start Year Selector*/}\n                        <div className=\"col-xl-6 col-lg-4 col-md-6 col-sm-6 col-xs-12\">\n                            <div className=\"input-group input-group-sm mb-1\">\n                                <div className=\"input-group-prepend\">\n                                    <span className=\"input-group-text\">Start Year </span>\n                                </div>\n                                <input\n                                    className={\"form-control \" + ((start_year >= 1980  &&\n                                        start_year < 2018) ? \"\" : \"is-invalid\")}\n                                    type=\"number\" name=\"start_year\" min=\"1980\" max=\"2018\" step={1}\n                                    value={start_year}\n                                    onChange={(e) => this.props.handle_config_update(e)}\n                                />\n                                <div className=\"invalid-feedback\">\n                                        Start year has to be between 1980 and 2018.\n                                </div>\n                            </div>\n                        </div>\n\n                        {/*Money Market Holding Selector*/}\n                        <div className=\"col-xl-6 col-lg-4 col-md-6 col-sm-6 col-xs-12\">\n                            <div className=\"input-group input-group-sm mb-1\">\n                                <div className=\"input-group-prepend\">\n                                    <span className=\"input-group-text\">Holding while in Cash</span>\n                                </div>\n                                <AutoCompleteField\n                                    ticker={this.props.config.money_market_holding}\n                                    handle_holding_update={(ticker) =>\n                                        this.props.handle_mmh_update(ticker)}\n                                />\n                            </div>\n                        </div>\n\n                        {/*Leverage Selector*/}\n                        <div className=\"col-xl-6 col-lg-4 col-md-6 col-sm-6 col-xs-12\">\n                            <div className=\"input-group input-group-sm mb-1\">\n                                <div className=\"input-group-prepend\">\n                                    <span className=\"input-group-text\">Leverage </span>\n                                </div>\n                                <input\n                                    className={\"form-control \" + ((leverage > 0.00 && leverage < 4)\n                                        ? \"\" : \"is-invalid\")}\n                                    type=\"number\" name=\"leverage\" min=\"0\" max=\"4\" step={0.01}\n                                    value={leverage}\n                                    onChange={(e) => this.props.handle_config_update(e)}\n                                />\n                                <div className=\"invalid-feedback\">\n                                        Leverage has to be between 0 and 4.\n                                </div>\n                            </div>\n                        </div>\n\n\n                        {/*Borrowing Costs*/}\n                        {borrowing_costs_selector}\n\n                        {/*Taxes Selector*/}\n                        <div className=\"col-xl-6 col-lg-4 col-md-6 col-sm-6 col-xs-12\">\n                            <div className={\"btn-group btn-group-sm btn-group-toggle mb-1 \" +\n                                \"dual_mom_buttons input-group input-group-sm\"} data-toggle=\"buttons\">\n                                <div className=\"input-group-prepend\">\n                                    <span className=\"input-group-text\">Simulate Taxes: </span>\n                                </div>\n                                <label className={\"btn \" + (this.props.config.simulate_taxes ?\n                                    \"btn-primary active\" : \"btn-outline-secondary\")}>\n                                    <input type=\"radio\" name=\"simulate_taxes\"\n                                        onChange={(e) => this.props.handle_config_update(e)}\n                                    />\n                                    Yes\n                                </label>\n                                <label className={\"btn \" + (!this.props.config.simulate_taxes ?\n                                    \"btn-primary active\" : \"btn btn-outline-secondary\")}>\n                                    <input type=\"radio\" name=\"simulate_taxes\"\n                                        onChange={(e) => this.props.handle_config_update(e)}\n                                    />\n                                    No\n                                </label>\n                            </div>\n                        </div>\n                    </div>\n                    <TaxConfig\n                        key={0}\n                        config={this.props.config}\n                        handle_config_update={(e) => this.props.handle_config_update(e)}\n                        handle_tax_rate_update={(tax_type, rate) =>\n                            this.props.handle_tax_rate_update(tax_type, rate)}\n                    />\n                </div>\n            </div>\n        )\n    }\n}\nMainInterface.propTypes={\n    config: PropTypes.object.isRequired,\n    handle_config_update: PropTypes.func.isRequired,\n    handle_tax_rate_update: PropTypes.func.isRequired,\n    handle_mmh_update: PropTypes.func.isRequired\n};\n\n\nclass TaxConfig extends React.Component{\n    constructor(props){\n        super(props);\n\n        this.config_to_name = {\n\n            'fed_st_gains':     'Federal Short Term Cap Gains',\n            'state_st_gains':   'State Short Term Cap Gains',\n            'fed_lt_gains':     'Federal Long Term Cap Gains',\n            'state_lt_gains':   'State Long Term Cap Gains',\n        }\n    }\n\n    render() {\n        if (this.props.config.simulate_taxes){\n            let selectors = [];\n            for (const [tax_type, _i] of Object.entries(this.props.config.tax_rates)){\n                const tax_name = this.config_to_name[tax_type];\n                const tax_rate = this.props.config.tax_rates[tax_type];\n                const rate_valid = (tax_rate >= 0 && tax_rate <= 100);\n                selectors.push(\n\n                    <div key={tax_type} className=\"col-xl-6 col-lg-4 col-md-6 col-sm-12 col-xs-12\">\n                        <div className=\"tax_rate_selector input-group input-group-sm\">\n                            <div className=\"input-group-prepend\">\n                                <span className=\"input-group-text tax_type_name\">{tax_name}</span>\n                            </div>\n                            <input\n                                className={\"form-control rem-5 \" +\n                                    ((tax_rate >= 0 && tax_rate <= 100) ? \"\" : \"is-invalid\")}\n                                type=\"number\" name={tax_type} min=\"0\" max=\"100\"\n                                value={tax_rate}\n                                onChange={(e) =>\n                                    this.props.handle_tax_rate_update(tax_type, e.target.value)}\n                            />\n                            <div className=\"input-group-append\">\n                                <span className=\"input-group-text\">%</span>\n                            </div>\n                            <div className=\"invalid-feedback\">\n                                    Tax percentage needs to be between 0 and 100.\n                            </div>\n                        </div>\n                    </div>\n                )\n            }\n\n            return(\n                <div className=\"row inner_config_row\">\n                    {selectors}\n                </div>\n            )\n        } else {\n            return(null)\n        }\n\n    }\n}\nTaxConfig.propTypes={\n    config: PropTypes.object.isRequired,\n    handle_config_update: PropTypes.func.isRequired,\n    handle_tax_rate_update: PropTypes.func.isRequired,\n};\n\nclass ComponentSelector extends React.Component {\n    constructor(props){\n        super(props);\n    }\n\n\n    render() {\n\n        // figure out if this is the final empty component\n        const is_empty_component = (!('weight' in this.props.config));\n\n        // Empty component Shell\n        if (is_empty_component) {\n            return (\n                <div className=\"col-xl-6 col-lg-4 col-md-4 col-sm-6 col-xs-12\">\n                    {/*Title / Name*/}\n                    <input className=\"component_title form-control component_title_new\"\n                        type=\"text\" name=\"name\" maxLength=\"14\" size=\"14\" disabled\n                        value={this.props.config.name}\n                    />\n                    {/*Add component form*/}\n                    <div className=\"input-group input-group-sm mb-1\">\n                        <input className=\"form-control \"\n                            type=\"text\" name=\"name\" maxLength=\"14\" size=\"14\"\n                            value={this.props.config.name}\n                            onChange={(e) => this.props.handle_component_update(e)}\n                        />\n                        <div className=\"input-group-append\">\n                            <button className=\"btn btn-primary active\" type=\"button\"\n                                name=\"add_component\"\n                                onClick={(e) => this.props.handle_component_update(e)}>\n                                Add Component\n                            </button>\n                        </div>\n                    </div>\n                </div>\n            )\n\n        // filled component\n        } else {\n            let holding_boxes = [];\n            for (const [holding_id, ticker] of this.props.config.holdings.entries()) {\n                holding_boxes.push(\n                    <AutoCompleteField\n                        key={holding_id}\n                        ticker={ticker}\n                        handle_holding_update={(ticker) =>\n                            this.props.handle_holding_update(holding_id, ticker)}\n                    />\n                );\n            }\n\n            // For buy and hold, only display and use the first ticker\n            if (!this.props.config.dual_momentum) {\n                holding_boxes = holding_boxes.slice(0, 1);\n            }\n\n            return (\n                <div className=\"col-xl-6 col-lg-4 col-md-4 col-sm-6 col-xs-12 pb-2\">\n\n                    {/*Title / Name*/}\n                    <input className=\"component_title form-control\"\n                        type=\"text\" name=\"name\" maxLength=\"14\" size=\"14\"\n                        value={this.props.config.name}\n                        onChange={(e) => this.props.handle_component_update(e)}\n                    />\n\n                    {/*Buy and Hold  / Dual Momentum Selector */}\n                    <div className=\"btn-group btn-group-sm btn-group-toggle mb-1 dual_mom_buttons\"\n                        data-toggle=\"buttons\">\n                        <label\n                            className={this.props.config.dual_momentum ? \"btn btn-primary active\" :\n                                \"btn btn-outline-secondary\"}>\n                            <input type=\"radio\" name=\"dual_momentum\"\n                                onChange={(e) => this.props.handle_component_update(e)}\n                            />\n                            Dual Momentum\n                        </label>\n                        <label\n                            className={!this.props.config.dual_momentum ? \"btn btn-primary active\" :\n                                \"btn btn-outline-secondary\"}>\n                            <input type=\"radio\" name=\"dual_momentum\"\n                                onChange={(e) => this.props.handle_component_update(e)}\n                            />\n                            Buy and Hold\n                        </label>\n                    </div>\n\n                    {/*Number of holdings selector*/}\n                    <div className=\"input-group input-group-sm mb-1\">\n                        <div className=\"input-group-prepend\">\n                            <span className=\"input-group-text\">Number of holdings: </span>\n                        </div>\n                        <input\n                            className={\"form-control\" + ((\n                                [1, 2].includes(this.props.config.max_holdings) ||\n                                !this.props.config.dual_momentum) ? \"\" : \" is-invalid\")}\n                            disabled={!this.props.config.dual_momentum}\n                            type=\"number\" name=\"max_holdings\" min=\"1\" max=\"2\"\n                            value={this.props.config.dual_momentum ?\n                                this.props.config.max_holdings : \"\"}\n                            onChange={(e) => this.props.handle_component_update(e)}\n                        />\n                        <div className=\"invalid-feedback\">\n                            Number of holdings per category has to be 1 or 2.\n                        </div>\n                    </div>\n\n                    {/*Lookback selector*/}\n                    <div className=\"input-group input-group-sm mb-1\">\n                        <div className=\"input-group-prepend\">\n                            <span className=\"input-group-text rem-6\">Lookback: </span>\n                        </div>\n                        <input\n                            className={!this.props.config.dual_momentum ||\n                            (this.props.config.lookback >= 1 && this.props.config.lookback <= 24) ?\n                                \"form-control\" : \"form-control is-invalid\"}\n                            disabled={!this.props.config.dual_momentum}\n                            type=\"number\" name=\"lookback\" min=\"1\" max=\"24\"\n                            value={this.props.config.dual_momentum ? this.props.config.lookback :\"\"}\n                            onChange={(e) => this.props.handle_component_update(e)}\n                        />\n                        <div className=\"input-group-append\">\n                            <span className=\"input-group-text\">months</span>\n                        </div>\n                        <div className=\"invalid-feedback\">\n                            Lookback has to be between 1 and 24 months.\n                        </div>\n                    </div>\n\n\n                    {/*Weight selector*/}\n                    <div className=\"mb-1\">\n                        <div className=\"input-group input-group-sm\">\n                            <div className=\"input-group-prepend\">\n                                <span className=\"input-group-text rem-6\">Weight: </span>\n                            </div>\n                            <input\n                                className={this.props.total_allocated_weight === 1 ?\n                                    \"form-control\" : \"form-control is-invalid\"}\n                                type=\"number\" name=\"weight\" min=\"0\" max=\"100\"\n                                value={this.props.config.weight * 100}\n                                onChange={(e) => this.props.handle_component_update(e)}\n                            />\n                            <div className=\"input-group-append\">\n                                <span className=\"input-group-text\">%</span>\n                            </div>\n                            <div className=\"invalid-feedback\">\n                                Total weights need to add to 100%.\n                            </div>\n                        </div>\n                    </div>\n                    <div className=\"ticker_list\">\n                        <div>\n                            <div className=\"input-group input-group-sm\">\n                                <div className=\"input-group-prepend ticker_list_heading\">\n                                    <span className=\"input-group-text ticker_list_heading\">\n                                        Ticker List:\n                                    </span>\n                                </div>\n                            </div>\n                            <div className=\"holding_boxes\">\n                                {holding_boxes}\n                            </div>\n                        </div>\n                    </div>\n\n\n                    {/*Add / Remove ticker buttons*/}\n                    {(this.props.config.dual_momentum || this.props.config.holdings.length === 0) ?\n                        <button type=\"button\" className=\"btn btn-sm btn-outline-primary\"\n                            onClick={() => this.props.modify_number_of_holdings(1)}\n                        >Add Ticker</button> : null\n                    }\n                    <button type=\"button\" className=\"btn btn-sm btn-outline-primary button_remove\"\n                        onClick={() => this.props.modify_number_of_holdings(-1)}\n                    >Remove {this.props.config.holdings.length > 0 ? 'Ticker' : 'Part'}</button>\n                </div>\n            )\n        }\n    }\n}\nComponentSelector.propTypes={\n    config: PropTypes.object.isRequired,\n    total_allocated_weight: PropTypes.number.isRequired,\n    handle_component_update: PropTypes.func.isRequired,\n    handle_holding_update: PropTypes.func.isRequired,\n    modify_number_of_holdings: PropTypes.func.isRequired\n};\n\n\n/***************************************************************************************************\n * Main component for the main view.\n **************************************************************************************************/\nclass MainView extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            data: null,  // data for the viz\n\n            //is the current configuration valid, i.e. can we load new data with it?\n            config_is_valid: true,\n            dm_config: {\n\n                'data_load_error': undefined,\n                'config_hash': undefined,\n                'costs_per_trade': 0.1,\n                'start_year': 1980,\n\n                'leverage': 1.0,\n                'borrowing_costs_above_libor': 1.5,\n\n                'simulate_taxes': true,\n                'tax_rates': {\n                    'fed_st_gains': 22,\n                    'state_st_gains':   12,\n                    'fed_lt_gains': 15,\n                    'state_lt_gains':   5.1,\n                },\n                'money_market_holding': 'VGIT',\n                'momentum_leverages': {\n                    'months_for_leverage': 3,\n                    'config': {\n                        0.8: -0.3,  0.85: -0.3,    0.90: -0.2, 0.95: -0.2,\n                        1.30: 0.2,  1.20:  0.1,  1.15:  0.1,    1.10:  0.0, 1.05:  0.0\n                    }\n                }\n            },\n            dm_components: [\n                {\n                    'name': 'Equities',\n                    'weight': 0.25,\n                    'dual_momentum': true,\n                    'lookback': 12,\n                    'max_holdings': 1,\n                    'holdings': ['VTI', 'IEFA', 'IEMG', ''],\n                },\n                {\n                    'name': 'REITs',\n                    'weight': 0.25,\n                    'dual_momentum': true,\n                    'lookback': 12,\n                    'max_holdings': 1,\n                    'holdings': ['VNQ', 'REM', '']\n                },\n                {\n                    'name': 'Bonds',\n                    'weight': 0.25,\n                    'dual_momentum': true,\n                    'lookback': 12,\n                    'max_holdings': 1,\n                    'holdings': ['LQD', 'HYG', '']\n                },\n                {\n                    'name': 'Safety',\n                    'weight': 0.25,\n                    'dual_momentum': true,\n                    'lookback': 12,\n                    'max_holdings': 1,\n                    'holdings': ['TLT', 'GLD', '']\n                },\n                {\n                    'name': '',\n                }\n            ]\n        };\n        this.csrftoken = getCookie('csrftoken');\n    }\n\n    componentDidMount() {\n        this.load_result_data();\n    }\n\n    handle_config_update(event){\n\n        console.log(event);\n\n        let dm_config = {... this.state.dm_config};\n        const ename = event.target.name;\n\n        if (ename === 'simulate_taxes') {\n            dm_config['simulate_taxes'] = !dm_config['simulate_taxes']\n        } else if (ename === 'start_year'){\n            dm_config[ename] = parseInt(event.target.value);\n        } else if (ename === 'borrowing_costs_above_libor' || ename === 'leverage'){\n            dm_config[ename] = parseFloat(event.target.value);\n        }\n        this.setState({dm_config})\n    }\n\n    handle_tax_rate_update(tax_type, rate) {\n        let dm_config = {... this.state.dm_config};\n        let tax_rates = {... dm_config.tax_rates};\n        tax_rates[tax_type] = parseFloat(rate);\n        dm_config.tax_rates = tax_rates;\n        this.setState({dm_config});\n    }\n\n    handle_mmh_update(ticker){\n        let dm_config = {... this.state.dm_config};\n        dm_config.money_market_holding = ticker;\n        this.setState({dm_config});\n    }\n\n    handle_holding_update(component_id, holding_id, ticker){\n        let dm_components = [... this.state.dm_components];\n        let dm_component = {... dm_components[component_id]};\n        let holdings = [... dm_components[component_id]['holdings']];\n        holdings[holding_id] = ticker;\n\n        console.log(\"t\", ticker);\n        console.log(ticker_configs);\n\n        const config_is_valid = (ticker in ticker_configs || ticker === '') ?\n            this.state.config_is_valid: false;\n\n        dm_component.holdings = holdings;\n        dm_components[component_id] = dm_component;\n        this.setState({dm_components, config_is_valid});\n    }\n\n    handle_component_update(component_id, event){\n        if (event.target.name === 'add_component'){\n            this.modify_number_of_components(1, null);\n        } else {\n\n            let dm_components = [... this.state.dm_components];\n            let dm_component = {... dm_components[component_id]};\n\n            if (event.target.name === 'dual_momentum') {\n                dm_component['dual_momentum'] = !dm_component['dual_momentum']\n            } else if (event.target.name === 'weight') {\n                dm_component[event.target.name] = parseFloat(event.target.value) / 100;\n                // dm_components[component_id][event.target.name] = parseFloat(event.target.value);\n            } else if (event.target.name === 'lookback' || event.target.name === 'max_holdings') {\n                dm_component[event.target.name] = parseInt(event.target.value);\n                // dm_components[component_id][event.target.name] = parseInt(event.target.value);\n            } else if (event.target.name === 'name') {\n                dm_component[event.target.name] = event.target.value;\n                // dm_components[component_id][event.target.name] = event.target.value;\n            }\n            dm_components[component_id] = dm_component;\n            this.setState({dm_components});\n        }\n    }\n\n\n    modify_number_of_components(i, component_id){\n        // Add or remove components\n        let dm_components = [... this.state.dm_components];\n\n        // add new component\n        if (i === 1) {\n            let dm_component = {... dm_components[dm_components.length - 1]};\n            let name = dm_components[dm_components.length -1].name;\n            if (name === ''){\n                name = `Component ${dm_components.length}`\n            }\n\n            dm_component = {\n                'name': name,\n                'weight': 0,\n                'dual_momentum': true,\n                'lookback': 12,\n                'max_holdings': 1,\n                'holdings': ['']\n            };\n            // add new empty component at the end\n            dm_components[dm_components.length - 1] = dm_component;\n            dm_components.push({'name': ''})\n\n        // remove component\n        } else {\n            dm_components = dm_components.slice(\n                0, component_id).concat(dm_components.slice(component_id +1));\n        }\n\n        this.setState({dm_components: dm_components});\n    }\n\n    modify_number_of_holdings(i, component_id) {\n        let dm_components = [... this.state.dm_components];\n        let dm_component = {... dm_components[component_id]};\n        let holdings = [... dm_component.holdings];\n\n        // add new holding\n        if (i === 1) {\n            holdings.push('');\n            dm_component.holdings = holdings;\n            dm_components[component_id] = dm_component\n        //remove holding\n        } else {\n            if (holdings.length > 0) {\n                // if dual momentum mode, remove last holding\n                if (dm_component['dual_momentum']) {\n                    holdings = holdings.slice(0, -1);\n                } else { // if buy and hold, remove the only remaining holding\n                    holdings = [];\n                }\n                dm_component.holdings = holdings;\n\n                dm_components[component_id] = dm_component\n\n                // if none left, remove component\n            } else {\n                this.modify_number_of_components(-1, component_id);\n                return\n            }\n        }\n        this.setState({dm_components});\n    }\n\n    async load_result_data(url_params) {\n        const cur_stringified_config = json_stable_stringify({\n            'dm_components':  this.state.dm_components,\n            'dm_config': this.state.dm_config\n        });\n        if (url_params === undefined){\n            url_params = queryString.stringify({'conf': cur_stringified_config});\n            window.history.pushState(this.state.dm_config, \"\",url_params);\n            this.load_result_data(url_params);\n            return\n        }\n        let url = 'get_test_data?' + url_params;\n        fetch(url)\n            .then((response) => {\n                response\n                    .json()\n                    .then((d) => {\n\n                        if (!d.data_load_error) {\n                            d.data.monthly_data.forEach(element => {\n                                element.date_str = element.date;\n                                element.date_start = new Date(element.date[0], element.date[1]);\n                                element.date_end = new Date(element.date[0], element.date[1]\n                                    + 1);\n                            });\n                            let dm_config = this.state.dm_config;\n                            dm_config.config_hash = d.config_hash;\n                            dm_config.data_load_error = d.data_load_error;\n                            this.setState({\n                                data: d.data,\n                                dm_config: dm_config\n                            });\n                            return true\n                        } else{\n                            console.log(\"error\", d.data_load_error);\n                        }\n                    })\n            }).catch(() => {\n                console.log(\"error\");\n                return false\n            });\n    }\n\n    render() {\n\n        // get total weight allocated (should be 100)\n        let total_allocated_weight = 0;\n\n        for (const [_i, component] of this.state.dm_components.entries()) {\n            if (!isNaN(component.weight)) {\n                total_allocated_weight += component.weight;\n            }\n        }\n\n        let dm_components = [];\n        for (const [component_id, _d] of this.state.dm_components.entries()) {\n            dm_components.push(\n                <ComponentSelector\n                    key={component_id}\n                    config={{... this.state.dm_components[component_id]}}\n                    total_allocated_weight={total_allocated_weight}\n                    handle_holding_update={(holding_id, ticker) => {\n                        this.handle_holding_update(component_id, holding_id, ticker)\n                    }}\n                    handle_component_update={(event) => {\n                        this.handle_component_update(component_id, event)\n                    }}\n                    modify_number_of_holdings={(i) => {\n                        this.modify_number_of_holdings(i, component_id)\n                    }}\n                />\n            );\n        }\n\n        return (\n            <div className=\"container-fluid\">\n                <h1 className=\"display-2\">Dual Momentum Backtester</h1>\n\n                <div className={\"row\"} id={\"config_and_chart_row\"}>\n\n                    <div className={\"col-xl-6\"}>\n                        <div className=\"row mt-4 config_row\" id=\"components_row\">\n\n                            <div className={\"config_header\"}>\n                                <span>CONFIG</span>\n                            </div>\n                            <MainInterface\n                                config={{... this.state.dm_config}}\n                                handle_config_update={(e) => this.handle_config_update(e)}\n                                handle_tax_rate_update={(tax_type, rate) =>\n                                    this.handle_tax_rate_update(tax_type, rate)}\n                                handle_mmh_update={(ticker) => this.handle_mmh_update(ticker)}\n                            />\n                        </div>\n\n                        <div className=\"row mt-4 config_row\" id=\"components_row\">\n                            <div className={\"config_header\"}>\n                                <span>COMPONENTS</span>\n                            </div>\n                            <div className={\"row width-95\"}>\n                                {dm_components}\n                            </div>\n                        </div>\n                    </div>\n                    <div className={\"col-xl-6\"}>\n                        <div className={\"row\"} id={\"chart_row\"}>\n                            <div id={\"chart_container\"}>\n                                <ReturnsChart\n                                    data={this.state.data}\n                                    data_load_error={this.state.dm_config.data_load_error}\n                                    config_hash={this.state.dm_config.config_hash}\n                                    width={800}\n                                    height={Math.max(400, window.innerHeight / 3)}\n                                />\n                            </div>\n                        </div>\n                        <div id=\"summary_container\">\n                            <ReturnsSummary\n                                data={this.state.data}\n                                simulate_taxes={this.state.dm_config.simulate_taxes}\n                            />\n                        </div>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n\n\n    update_url_if_no_change_after_2seconds(old_stringified_config){\n\n        let cur_stringified_config = json_stable_stringify({\n            'dm_components':  this.state.dm_components,\n            'dm_config': this.state.dm_config\n        });\n        const config_is_valid = this.validate_config();\n\n        if (old_stringified_config === cur_stringified_config && config_is_valid) {\n            const url_params = queryString.stringify({'conf': cur_stringified_config});\n            window.history.pushState(this.state.dm_config, \"\",url_params);\n            this.load_result_data(url_params)\n        }\n    }\n\n    validate_config(){\n        let errors = [];\n        for (const component of this.state.dm_components){\n            if (component.name === '') {continue;}\n            for (const holding of component.holdings){\n                if(!(holding in ticker_configs) && holding !== ''){\n                    errors.push(`${holding} in ${component.name} is not a valid holding.`)\n                }\n            }\n        }\n\n        if (!(this.state.dm_config.money_market_holding in ticker_configs)){\n            errors.push(`Money market holding (${this.state.dm_config.money_market_holding} is not a\n            valid holding.`)\n        }\n\n        console.log(\"errors\", errors);\n        return (errors.length === 0)\n    }\n\n    componentDidUpdate(prevProps, prevState, snapshot) {\n        // config has changed if either dm_components or dm_config has change\n        const dm_config_has_changed = (\n            !equal(prevState.dm_components, this.state.dm_components) ||\n            !equal(prevState.dm_config, this.state.dm_config)\n        );\n\n        // if config has changed, wait for 2 seconds.\n        // if no further changes are incoming, update the url and the graph\n        if (dm_config_has_changed){\n            const stringified_config = json_stable_stringify({\n                'dm_components':  this.state.dm_components,\n                'dm_config': this.state.dm_config\n            });\n            setTimeout(() => {\n                this.update_url_if_no_change_after_2seconds(stringified_config)\n            }, 2000);\n        }\n    }\n}\n\n// when importing Main what do we get?\nexport default MainView;\n","/**\n * Common.js -- miscellaneous routines useful throughout the system\n */\n\n\n/**\n * Get the value of a cookie, given its name\n * Adapted from https://docs.djangoproject.com/en/2.2/ref/csrf/#ajax\n * @param {string} name - The name of the cookie\n */\nexport function getCookie(name) {\n    let cookieValue;\n    if (document.cookie && document.cookie !== '') {\n        const cookies = document.cookie.split(';');\n        for (const raw_cookie of cookies) {\n            const cookie = raw_cookie.trim();\n            // Does this cookie string begin with the name we want?\n            if (cookie.substring(0, name.length + 1) === (name + '=')) {\n                cookieValue = decodeURIComponent(cookie.substring(name.length + 1));\n                break;\n            }\n        }\n    }\n    return cookieValue;\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport './index.css'\n\nimport MainView from './main/main';\n\nwindow.app_modules = {\n    React,  // Make React accessible from the base template\n    ReactDOM,  // Make ReactDOM accessible from the base template\n\n    // Add all frontend views here\n    MainView,\n};\n"],"sourceRoot":""}
(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{112:function(e,t,a){},113:function(e,t,a){},135:function(e,t,a){},136:function(e,t,a){},137:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),l=a(7),s=a.n(l),o=(a(95),a(96),a(53)),i=a.n(o),c=a(70),_=a(29),m=a(18),u=a(17),d=a(33),p=a(19),h=a(20),g=a(23),y=a(22),f=a(54),x=a.n(f),v=a(49),E=a(44),b=(a(112),a(12));window.d3=b;var S=function(e){Object(g.a)(a,e);var t=Object(y.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state={tooltip_data:null,highlighted_idx:void 0,zoomTransform:null},n.graphSVG=r.a.createRef(),n.graph_width=800,n.recalculateD3Paths=!0,n.xScale=null,n.yScale=null,n.xAxisRef=r.a.createRef(),n.xAxisGenerator=null,n.xAxisGridLinesRef=r.a.createRef(),n.xAxisGridLinesGenerator=null,n.yAxisRef=r.a.createRef(),n.yAxisGenerator=null,n.yAxisGridLinesRef=r.a.createRef(),n.yAxisGridLinesGenerator=null,n.returnsLineRef=r.a.createRef(),n.sp500LineRef=r.a.createRef(),n.margin={bottom:30,top:30,left:35,right:30},n.zoom=b.zoom().scaleExtent([1,8]).translateExtent([[-100,-100],[n.graph_width+100,n.props.height+100]]).extent([[-100,-100],[n.graph_width+100,n.props.height+100]]).on("zoom",n.zoomed.bind(Object(E.a)(n))),n}return Object(h.a)(a,[{key:"zoomed",value:function(){this.setState({zoomTransform:b.event.transform})}},{key:"shouldComponentUpdate",value:function(e,t,a){return this.state.zoomTransform!==t.zoomTransform||e.data&&!this.bars||this.props.config_hash===e.config_hash?this.recalculateD3Paths=!0:this.recalculateD3Paths=!1,!0}},{key:"handle_mouseover",value:function(e){var t,a=e.pageX-e.target.getBoundingClientRect().x,n=this.xScale.invert(a),r=null,l=Object(u.a)(this.props.data.monthly_data.entries());try{for(l.s();!(t=l.n()).done;){var s=Object(d.a)(t.value,2),o=s[0],i=s[1];i.date_start<=n&&n<=i.date_end&&(r=o,i.x=this.xScale(i.date_end),i.x=Math.max(i.x,this.margin.left),i.x=Math.min(i.x,this.graph_width-this.margin.left),i.y=this.yScale(i.value_end_posttax),i.y=Math.min(i.y,this.props.height-this.margin.top),i.y=Math.max(i.y,this.margin.top),this.setState({tooltip_data:i,highlighted_idx:r}))}}catch(c){l.e(c)}finally{l.f()}}},{key:"handle_mouseout",value:function(){this.setState({tooltip_data:null,highlighted_idx:void 0})}},{key:"calculate_paths_with_d3",value:function(){var e=this;this.graph_width=Math.max(document.getElementById("components_row").clientWidth,document.getElementById("chart_row").clientWidth),this.xScale=b.scaleTime().range([this.margin.left,this.graph_width-this.margin.right]).domain(b.extent(this.props.data.monthly_data,function(e){return e.date_start})),this.yScale=b.scaleLog().base(10).range([this.props.height-this.margin.top,this.margin.bottom]).domain([.5*b.min(this.props.data.monthly_data,function(e){return e.value_start_posttax}),1.5*b.max(this.props.data.monthly_data,function(e){return e.value_end_posttax})]),this.state.zoomTransform&&(this.xScale.domain(this.state.zoomTransform.rescaleX(this.xScale).domain()),this.yScale.domain(this.state.zoomTransform.rescaleY(this.yScale).domain())),this.returns_line_generator=this.get_line_generator("value_end_posttax"),this.sp500_line_generator=this.get_line_generator("value_end_spy_posttax"),this.xAxisGenerator=b.axisBottom().scale(this.xScale).ticks(10).tickSize(20).tickFormat(function(t){return e.state.zoomTransform&&e.state.zoomTransform.k>4?b.timeFormat("%b %Y")(t):b.timeFormat("%Y")(t)}),this.xAxisGridLinesGenerator=b.axisBottom().scale(this.xScale).tickSize(-this.props.height+this.margin.top+this.margin.bottom).tickFormat(""),this.yAxisGenerator=b.axisLeft().scale(this.yScale).ticks(20,function(e){return e<1?e.toFixed(1):e.toFixed(0)}),this.yAxisGridLinesGenerator=b.axisLeft().scale(this.yScale).tickSize(-this.graph_width+this.margin.left+this.margin.right).ticks(2).tickFormat("")}},{key:"get_line_generator",value:function(e){var t=this;return b.line().x(function(e){return t.xScale(e.date_end)}).y(function(a){return t.yScale(a[e])}).defined(function(a){var n=t.xScale(a.date_end),r=t.yScale(a[e]);return n<t.graph_width-t.margin.right&&n>t.margin.left&&r<t.props.height-t.margin.top&&r>t.margin.bottom})}},{key:"render",value:function(){var e=this;if(this.props.data){this.recalculateD3Paths&&this.calculate_paths_with_d3();var t=this.state.tooltip_data;return r.a.createElement(r.a.Fragment,null,r.a.createElement("svg",{ref:this.graphSVG,width:this.graph_width,height:this.props.height,onMouseMove:function(t){return e.handle_mouseover(t)},onMouseOut:function(){return e.handle_mouseout()}},r.a.createElement("g",null,r.a.createElement("g",{ref:this.xAxisGridLinesRef,className:"grid"}),r.a.createElement("g",{ref:this.yAxisGridLinesRef,className:"grid"})),r.a.createElement("g",null,r.a.createElement("path",{ref:this.sp500LineRef,className:"benchmark_line",stroke:"#ff7f0e"}),r.a.createElement("path",{ref:this.returnsLineRef,className:"return_line",stroke:"#1f77b4"})),r.a.createElement("g",null,r.a.createElement("g",{ref:this.xAxisRef}),r.a.createElement("g",{ref:this.yAxisRef})),r.a.createElement("g",{id:"crosshairs"},r.a.createElement("line",{x1:t?t.x:-1e3,x2:t?t.x:-1e3,y1:this.margin.top,y2:this.props.height-this.margin.bottom,style:{stroke:"black",strokeDasharray:"4"}}),r.a.createElement("line",{x1:this.margin.left,x2:this.graph_width-this.margin.right,y1:t?t.y:-1e3,y2:t?t.y:-1e3,style:{stroke:"black",strokeDasharray:"4"}})),r.a.createElement("rect",{id:"chart_mouseover_target",width:this.graph_width,height:this.props.height,style:{fill:"#21252900"}})),r.a.createElement(k,{data:this.props.data.monthly_data[this.state.highlighted_idx?this.state.highlighted_idx:this.props.data.monthly_data.length-1]}),r.a.createElement(N,{tooltip_data:this.state.tooltip_data}))}return r.a.createElement("div",null)}},{key:"componentDidUpdate",value:function(){b.select(this.xAxisRef.current).call(this.xAxisGenerator).attr("transform","translate(0, ".concat(this.props.height-this.margin.bottom,")")),b.select(this.xAxisGridLinesRef.current).call(this.xAxisGridLinesGenerator).attr("transform","translate(0, ".concat(this.props.height-this.margin.bottom,")")),b.select(this.yAxisRef.current).call(this.yAxisGenerator).attr("transform","translate(".concat(this.margin.left,", 0)")),b.select(this.yAxisGridLinesRef.current).call(this.yAxisGridLinesGenerator).attr("transform","translate(".concat(this.margin.left,", 0)")),b.select(this.returnsLineRef.current).datum(this.props.data.monthly_data).attr("d",this.returns_line_generator),b.select(this.sp500LineRef.current).datum(this.props.data.monthly_data).attr("d",this.sp500_line_generator),b.select(this.graphSVG.current).call(this.zoom)}}]),a}(r.a.Component),k=function(e){Object(g.a)(a,e);var t=Object(y.a)(a);function a(e){return Object(p.a)(this,a),t.call(this,e)}return Object(h.a)(a,[{key:"render",value:function(){return this.props.data?r.a.createElement("div",{id:"ticker_boxes"},r.a.createElement("div",{id:"strategy_box",className:"ticker_box"},r.a.createElement("div",null,"Strategy"),r.a.createElement("div",{className:"ticker_box_value_div"},(100*this.props.data.value_end_posttax).toFixed(0)+"%")),r.a.createElement("div",{id:"benchmark_box",className:"ticker_box"},r.a.createElement("div",null,"S&P 500"),r.a.createElement("div",{className:"ticker_box_value_div"},(100*this.props.data.value_end_spy_posttax).toFixed(0)+"%"))):r.a.createElement("div",null)}}]),a}(r.a.Component),N=function(e){Object(g.a)(a,e);var t=Object(y.a)(a);function a(e){return Object(p.a)(this,a),t.call(this,e)}return Object(h.a)(a,[{key:"render",value:function(){if(this.props.tooltip_data){var e,t=this.props.tooltip_data,a=t.date_start.toLocaleDateString("en-US",{month:"short",year:"numeric"}),n=(100*(t.value_end_pretax/t.value_start_pretax-1)).toFixed(3)+"%",l=[],s=Object(u.a)(this.props.tooltip_data.holdings);try{for(s.s();!(e=s.n()).done;){var o=e.value;l.push(r.a.createElement("tr",{key:o.name},r.a.createElement("td",null,o.holdings.join(", ")),r.a.createElement("td",{className:"returns_col"},(100*(o.pretax-1)).toFixed(3)+"%")))}}catch(i){s.e(i)}finally{s.f()}return r.a.createElement("div",{className:"chart_tooltip"},r.a.createElement("table",{className:"table"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",{colSpan:2},a)),r.a.createElement("tr",null,r.a.createElement("td",null,"Return"),r.a.createElement("td",{className:"returns_col"},n)),l)))}return r.a.createElement("div",null)}}]),a}(r.a.Component),F=(a(113),a(27)),T=function(e){Object(g.a)(a,e);var t=Object(y.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state={selected_tab:"Summary"},n}return Object(h.a)(a,[{key:"switch_table",value:function(e){this.setState({selected_tab:e})}},{key:"render",value:function(){var e=this;if(this.props.data){var t,a=this.props.data;if("Summary"===this.state.selected_tab){var n;n=this.props.simulate_taxes?[["CAGR (Pretax)","cagr_","_pretax_str"],["CAGR (Posttax)","cagr_","_posttax_str"],["Total Returns (Pretax)","total_returns_","_pretax"],["Total Returns (Posttax)","total_returns_","_posttax"],["Max Drawdown ","max_dd_","_pretax_str"],["Max Drawdown Date ","max_dd_date_","_pretax_str"],["Sharpe","sharpe_",""],["Sortino","sortino_",""],["Annual Volatility","annual_volatility_","_str"]]:[["CAGR","cagr_","_pretax_str"],["Total Returns","total_returns_","_pretax"],["Max Drawdown ","max_dd_","_pretax_str"],["Max Drawdown Date ","max_dd_date_","_pretax_str"],["Sharpe","sharpe_",""],["Sortino","sortino_",""],["Annual Volatility","annual_volatility_","_str"]];var l,s=[],o=Object(u.a)(n);try{for(o.s();!(l=o.n()).done;){var i=l.value;s.push({metric:i[0],strategy:a["".concat(i[1],"strategy").concat(i[2])],sp500:a["".concat(i[1],"sp500").concat(i[2])]})}}catch(M){o.e(M)}finally{o.f()}t=r.a.createElement(F.g,{hover:!0},r.a.createElement(F.i,{columns:[{label:"Metric",field:"metric"},{label:"Strategy",field:"strategy"},{label:"S&P 500",field:"sp500"}]}),r.a.createElement(F.h,{rows:s}))}else if("Monthly Holdings"===this.state.selected_tab){var c,m=[],d=Object(u.a)(a.monthly_data[0].holdings);try{for(d.s();!(c=d.n()).done;){var p=c.value;m.push(p.name)}}catch(M){d.e(M)}finally{d.f()}for(var h=[{label:"Date",field:"date",sort:"desc"},{label:"Return",field:"returns"}],g=0,y=m;g<y.length;g++){var f=y[g];h.push({label:f,field:f})}var x,v=[],E=Object(u.a)(Object(_.a)(a.monthly_data).reverse());try{for(E.s();!(x=E.n()).done;){var b,S=x.value,k={date:S.date_start.toLocaleDateString("en-US",{month:"short",year:"numeric"}),returns:(100*(S.value_end_pretax/S.value_start_pretax-1)).toFixed(3)+"%"},N=Object(u.a)(S.holdings);try{for(N.s();!(b=N.n()).done;){var T=b.value;k[T.name]=T.holdings.join(", ")}}catch(M){N.e(M)}finally{N.f()}v.push(k)}}catch(M){E.e(M)}finally{E.f()}t=r.a.createElement(F.g,{scrollY:!0,hover:!0},r.a.createElement(F.i,{columns:h}),r.a.createElement(F.h,{rows:v}))}else"Correlations"===this.state.selected_tab&&(t=r.a.createElement(F.g,{hover:!0},r.a.createElement(F.i,{columns:this.props.data.correlations.columns}),r.a.createElement(F.h,{rows:this.props.data.correlations.data})));return r.a.createElement("div",null,r.a.createElement("ul",{className:"nav nav-tabs"},r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{className:"nav-link",onClick:function(){return e.switch_table("Summary")}},"Summary")),r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{className:"nav-link",onClick:function(){return e.switch_table("Monthly Holdings")}},"Monthly Holdings")),r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{className:"nav-link",onClick:function(){return e.switch_table("Correlations")}},"Correlations"))),t)}return r.a.createElement("div",null)}}]),a}(r.a.Component),M=a(178),O=a(177),w=(a(135),{ONES:{name:"Ones",start_year:1980,early_replacement:null,early_monthly_index_replacement:null,suggest_in_search:!1,tax_category:"equities"},VTI:{name:"U.S. Stock Market",name_full:"Vanguard Total Stock Market Index Fund ETF",start_year:2001,early_replacement:"SPY",early_monthly_index_replacement:null,suggest_in_search:!0,tax_category:"equities"},SPY:{name:"S&P 500",name_full:"SPDR S&P 500 ETF ",start_year:1993,early_replacement:"VFINX",early_monthly_index_replacement:null,suggest_in_search:!0,tax_category:"equities"},VFINX:{name:"S&P 500 Mutual Fund",name_full:"Vanguard 500 Index Fund",start_year:1980,early_replacement:null,early_monthly_index_replacement:null,suggest_in_search:!1,tax_category:"equities"},QQQ:{name:"Nasdaq 100",name_full:"Invesco QQQ Trust",start_year:1999,early_replacement:"RYOCX",early_monthly_index_replacement:null,suggest_in_search:!0,tax_category:"equities"},RYOCX:{name:"Nasdaq 100 Mutual Fund",name_full:"Rydex NASDAQ-100 Fund",start_year:1994,early_replacement:"ONES",early_monthly_index_replacement:null,suggest_in_search:!1,tax_category:"equities"},ESGV:{name:"U.S. ESG Stocks",name_full:"Vanguard Environmental, Social and Governance U.S. Stock ETF",start_year:2018,early_replacement:"VFTSX",early_monthly_index_replacement:null,suggest_in_search:!0,tax_category:"equities"},VFTSX:{name:"Vanguard FTSE Social Index Fund",start_year:2e3,early_replacement:"VTI",early_monthly_index_replacement:null,suggest_in_search:!1,tax_category:"equities"},IEFA:{name:"Developed Stock Markets",start_year:2012,early_replacement:"EFA",early_monthly_index_replacement:null,suggest_in_search:!0,tax_category:"equities"},EFA:{name:"Developed Stock Markets (EAFE)",start_year:2001,early_replacement:"AAIEX",early_monthly_index_replacement:null,suggest_in_search:!1,tax_category:"equities"},AAIEX:{name:"American Beacon International Equity",start_year:1996,early_replacement:"OPPAX",early_monthly_index_replacement:null,suggest_in_search:!1,tax_category:"equities"},OPPAX:{name:"Oppenheimer Global Fund",start_year:1980,early_replacement:null,early_monthly_index_replacement:null,suggest_in_search:!1,tax_category:"equities"},VEA:{name:"Developed Stock Markets",name_full:"Vanguard FTSE Developed Markets Index Fund ETF",start_year:2007,early_replacement:"EFA",early_monthly_index_replacement:null,suggest_in_search:!1,tax_category:"equities"},IEMG:{name:"Emerging Stock Markets",name_full:"iShares Core MSCI Emerging Markets ETF",start_year:2012,early_replacement:"EEM",early_monthly_index_replacement:null,suggest_in_search:!0,tax_category:"equities"},EEM:{name:"iShares MSCI Emerging Markets ETF",start_year:2003,early_replacement:"TWMIX",early_monthly_index_replacement:null,suggest_in_search:!1,tax_category:"equities"},TWMIX:{name:"American Century Emerging Markets Fund",start_year:1997,early_replacement:"MADCX",early_monthly_index_replacement:null,suggest_in_search:!1,tax_category:"equities"},MADCX:{name:"BlackRock Emerging Markets Fund, Inc.",start_year:1989,early_replacement:"ONES",early_monthly_index_replacement:null,suggest_in_search:!1,tax_category:"equities"},VWO:{name:"Vanguard FTSE Emerging Markets Index Fund",start_year:2005,early_replacement:"EEM",early_monthly_index_replacement:null,suggest_in_search:!1,tax_category:"equities"},USMV:{name:"U.S. Low Volatility Stocks",name_full:"iShares Edge MSCI Min Vol USA ETF",start_year:2011,early_replacement:"SPLV",early_monthly_index_replacement:null,suggest_in_search:!0,tax_category:"equities"},SPLV:{name:"iShares Edge MSCI Min Vol USA",start_year:2011,early_replacement:"VTI",early_monthly_index_replacement:null,suggest_in_search:!1,tax_category:"equities"},EFAV:{name:"Developed Markets Low Volatility Stocks",name_full:"iShares Edge MSCI Min Vol EAFE ETF",start_year:2011,early_replacement:"EFA",early_monthly_index_replacement:null,suggest_in_search:!0,tax_category:"equities"},EEMV:{name:"Developing Markets Low Volatility Stocks",start_year:2011,early_replacement:"EEM",early_monthly_index_replacement:null,suggest_in_search:!0,tax_category:"equities"},VB:{name:"U.S. Small Caps Stocks",name_full:"Vanguard Small-Cap Index Fund ETF",start_year:2004,early_replacement:"NAESX",early_monthly_index_replacement:null,suggest_in_search:!0,tax_category:"equities"},NAESX:{name:"Vanguard Small Capitalization Index Fund",start_year:1980,early_replacement:null,early_monthly_index_replacement:null,suggest_in_search:!1,tax_category:"equities"},VSS:{name:"All World ex-U.S. Small Caps Stocks",name_full:"Vanguard Small Capitalization Index Fund",start_year:2009,early_replacement:"VINEX",early_monthly_index_replacement:null,suggest_in_search:!0,tax_category:"equities"},VINEX:{name:"Vanguard International Explorer Fund",start_year:1996,early_replacement:"ONES",early_monthly_index_replacement:null,suggest_in_search:!1,tax_category:"equities"},VNQ:{name:"U.S. Equity REITs",start_year:2004,early_replacement:"RWR",early_monthly_index_replacement:"eq_reit.csv",suggest_in_search:!0,tax_category:"reits"},RWR:{name:"U.S. Equities REITs",start_year:2001,early_replacement:"DFREX",early_monthly_index_replacement:"eq_reit.csv",suggest_in_search:!1,tax_category:"reits"},DFREX:{name:"DFA Real Estate Securities",start_year:1993,early_replacement:null,early_monthly_index_replacement:"eq_reit.csv",suggest_in_search:!1,tax_category:"reits"},VNQI:{name:"International Equity REITs",name_full:"Vanguard Global ex-US Real Estate Index Fund",start_year:2010,early_replacement:"RWX",early_monthly_index_replacement:null,suggest_in_search:!0,tax_category:"reits"},RWX:{name:"SPDR Dow Jones International Real Estate ETF",start_year:2006,early_replacement:"IERBX",early_monthly_index_replacement:null,suggest_in_search:!1,tax_category:"reits"},IERBX:{name:"Morgan Stanley International Fund, Inc. International Real Estate Portfolio",start_year:1997,early_replacement:"EGLRX",early_monthly_index_replacement:null,suggest_in_search:!1,tax_category:"reits"},EGLRX:{name:"Aberdeen International Real Estate Equity Fund",start_year:1989,early_replacement:"STMDX",early_monthly_index_replacement:null,suggest_in_search:!1,tax_category:"reits"},STMDX:{name:"Sterling Capital Stratton Real Estate Fund",start_year:1980,early_replacement:null,early_monthly_index_replacement:null,suggest_in_search:!1,tax_category:"reits"},REM:{name:"U.S. Mortgage REITs",name_full:"iShares Mortgage Real Estate Capped ETF",start_year:2007,early_replacement:null,early_monthly_index_replacement:"mortgage_reit.csv",suggest_in_search:!0,tax_category:"reits"},VMOT:{name:"Alpha Architect Value Momentum Trend",start_year:2017,early_replacement:null,early_monthly_index_replacement:"eq_vmot.csv",suggest_in_search:!0,tax_category:"equities"},QVAL:{name:"U.S. Quantitative Value",start_year:2014,early_replacement:null,early_monthly_index_replacement:"alpha_architect.csv",suggest_in_search:!0,tax_category:"equities"},IVAL:{name:"International Quantitative Value",start_year:2014,early_replacement:null,early_monthly_index_replacement:"alpha_architect.csv",suggest_in_search:!0,tax_category:"equities"},QMOM:{name:"U.S. Quantitative Momentum",start_year:2015,early_replacement:null,early_monthly_index_replacement:"alpha_architect.csv",suggest_in_search:!0,tax_category:"equities"},IMOM:{name:"International Quantitative Momentum",start_year:2015,early_replacement:null,early_monthly_index_replacement:"alpha_architect.csv",suggest_in_search:!0,tax_category:"equities"},VGIT:{name:"U.S. Treasuries, 5-7 Years",name_full:"Vanguard Intermediate-Term Treasury Fund ETF",start_year:2009,early_replacement:"VFITX",early_monthly_index_replacement:null,suggest_in_search:!0,duration:5,tax_category:"bonds_treasury"},VFITX:{name:"Intermediate (5-7 year) Treasuries Mutual Fund",start_year:1991,early_replacement:"FGOVX",early_monthly_index_replacement:null,suggest_in_search:!1,duration:5,tax_category:"bonds_treasury"},FGOVX:{name:"Fidelity Goverment Income Fund",start_year:1980,early_replacement:null,early_monthly_index_replacement:null,suggest_in_search:!1,duration:6,tax_category:"bonds_treasury"},IEF:{name:"U.S. Treasuries, 7-10 Years",start_year:2002,early_replacement:"VFITX",early_monthly_index_replacement:null,suggest_in_search:!0,duration:8,tax_category:"bonds_treasury"},TLT:{name:"U.S. Treasuries, 20+ Years",name_full:"iShares 20+ Year Treasury Bond ETF",start_year:2002,early_replacement:"VUSTX",early_monthly_index_replacement:null,suggest_in_search:!0,duration:17,tax_category:"bonds_treasury"},VUSTX:{name:"Vanguard Long Term Treasury Fund",start_year:1986,early_replacement:"VWESX",early_monthly_index_replacement:null,suggest_in_search:!1,duration:17,tax_category:"bonds_treasury"},VWESX:{name:"Vanguard Long Term Investment Grade Fund",start_year:1980,early_replacement:null,early_monthly_index_replacement:null,suggest_in_search:!1,tax_category:"bonds_other"},SHY:{name:"U.S. Treasuries, 1-3 Year",name_full:"iShares 1-3 Year Treasur Bond ETF",start_year:2003,early_replacement:"TWUSX",early_monthly_index_replacement:null,suggest_in_search:!0,duration:2,tax_category:"bonds_treasury"},TWUSX:{name:"American Century Short Term Government Fund",start_year:1982,early_replacement:"FGOVX",early_monthly_index_replacement:null,suggest_in_search:!1,tax_category:"bonds_treasury"},TIP:{name:"U.S. Treasuries, Inflation Protected",name_full:"iShares TIPS Bond ETF",start_year:2003,early_replacement:"VIPSX",early_monthly_index_replacement:null,suggest_in_search:!0,duration:7,tax_category:"bonds_treasury"},VIPSX:{name:"Vanguard Inflation-Protected Securities Fund",start_year:2e3,early_replacement:"ONES",early_monthly_index_replacement:null,suggest_in_search:!1,duration:7,tax_category:"bonds_treasury"},BOND:{name:"PIMCO Active Bond ETF",start_year:2012,early_replacement:"AGG",early_monthly_index_replacement:null,suggest_in_search:!1,duration:5,tax_category:"bonds_other"},BND:{name:"Total U.S. Bond Market",name_full:"Vanguard Total Bond Market ETF",start_year:2007,early_replacement:"AGG",early_monthly_index_replacement:null,suggest_in_search:!0,duration:6,tax_category:"bonds_other"},AGG:{name:"iShares Core U.S. Aggregate Bond ETF",start_year:2003,early_replacement:"VBMFX",early_monthly_index_replacement:null,suggest_in_search:!1,duration:6,tax_category:"bonds_other"},VBMFX:{name:"Vanguard Total Bond Market Fund",start_year:1986,early_replacement:"USAIX",early_monthly_index_replacement:null,suggest_in_search:!1,duration:6,tax_category:"bonds_other"},USAIX:{name:"USAA Income Fund",start_year:1980,early_replacement:null,early_monthly_index_replacement:null,suggest_in_search:!1,duration:6,tax_category:"bonds_other"},LQD:{name:"U.S. Inv Grade Corporate Bonds",name_full:"iShares iBoxx $ Investment Grade Corporate Bond ETF",start_year:2002,early_replacement:"MFBFX",early_monthly_index_replacement:null,suggest_in_search:!0,duration:9,tax_category:"bonds_other"},MFBFX:{name:"MFS Corporate Bond Fund",start_year:1980,early_replacement:null,early_monthly_index_replacement:null,suggest_in_search:!1,duration:8,tax_category:"bonds_other"},VTC:{name:"Vanguard Total Corporate Bond ETF",start_year:2017,early_replacement:"LQD",early_monthly_index_replacement:null,suggest_in_search:!1,duration:8,tax_category:"bonds_other"},VCSH:{name:"U.S. Inv Grade Short-Term Corporate Bonds",name_full:"Vanguard Short-Term Corporate Bond Index Fund",start_year:2009,early_replacement:"VFSTX",early_monthly_index_replacement:null,suggest_in_search:!0,duration:3,tax_category:"bonds_other"},VFSTX:{name:"Vanguard Short-Term Investment-Grade Fund",start_year:1983,early_replacement:"ONES",early_monthly_index_replacement:null,suggest_in_search:!1,duration:2,tax_category:"bonds_other"},HYG:{name:"U.S. High Yield Corporate Bonds",name_full:"iShares iBoxx $ High Yield Corporate Bond ETF",start_year:2007,early_replacement:"SPHIX",early_monthly_index_replacement:null,suggest_in_search:!0,duration:3,tax_category:"bonds_other"},SPHIX:{name:"Fidelity High Income Fund",start_year:1990,early_replacement:"ONES",early_monthly_index_replacement:null,suggest_in_search:!1,duration:3,tax_category:"bonds_other"},VTEB:{name:"U.S. Municipal Bonds",name_full:"Vanguard Tax-Exempt Bond Index Fund",start_year:2015,early_replacement:"MUB",early_monthly_index_replacement:null,suggest_in_search:!0,duration:5,tax_category:"bonds_muni"},MUB:{name:"iShares National Muni Bond ETF",start_year:2007,early_replacement:"VWITX",early_monthly_index_replacement:null,suggest_in_search:!1,duration:6,tax_category:"bonds_muni"},VWITX:{name:"Vanguard Intermediate-Term Tax-Exempt Fund Investor Shares",start_year:1980,early_replacement:null,early_monthly_index_replacement:null,suggest_in_search:!1,duration:5,tax_category:"bonds_muni"},HYD:{name:"U.S. High-Yield Municipal Bonds",name_full:"VanEck Vectors High-Yield Municipal Index ETF",start_year:2009,early_replacement:"MMHYX",early_monthly_index_replacement:null,suggest_in_search:!0,duration:7,tax_category:"bonds_muni"},MMHYX:{name:"MFS Municipal High Income Fund",start_year:1984,early_replacement:"PTAEX",early_monthly_index_replacement:null,suggest_in_search:!1,duration:7,tax_category:"bonds_muni"},PTAEX:{name:"Putnam Tax Exempt Income",start_year:1980,early_replacement:null,early_monthly_index_replacement:null,suggest_in_search:!1,duration:7,tax_category:"bonds_muni"},MBB:{name:"U.S. Mortgage-Backed Securities",name_full:"iShares MBS ETF",start_year:2007,early_replacement:"OMBAX",early_monthly_index_replacement:null,suggest_in_search:!0,duration:3,tax_category:"bonds_other"},OMBAX:{name:"JPMorgan Mortgage-Backed Securities Fund",start_year:2e3,early_replacement:"FMSFX",early_monthly_index_replacement:null,suggest_in_search:!1,duration:3,tax_category:"bonds_other"},FMSFX:{name:"",start_year:1984,early_replacement:"ONES",early_monthly_index_replacement:null,suggest_in_search:!1,duration:3,tax_category:"bonds_other"},VMBS:{name:"Vanguard Mortgage-Backed Securities Index Fund",start_year:2009,early_replacement:"MBB",early_monthly_index_replacement:null,suggest_in_search:!1,duration:4,tax_category:"bonds_other"},CWB:{name:"U.S. Convertible Bonds",start_year:2009,early_replacement:"PCONX",early_monthly_index_replacement:null,suggest_in_search:!0,tax_category:"bonds_other"},PCONX:{name:"Putnam Convertible Securities Fund",start_year:1980,early_replacement:null,early_monthly_index_replacement:null,suggest_in_search:!1,tax_category:"bonds_other"},BNDX:{name:"Total International Bond Market",start_year:2013,early_replacement:"ONES",early_monthly_index_replacement:null,suggest_in_search:!0,tax_category:"bonds_other"},PCY:{name:"Emerging Markets Government Bonds",name_full:"Invesco Emerging Markets Sovereign Debt ETF",start_year:2007,early_replacement:"FNMIX",early_monthly_index_replacement:null,suggest_in_search:!0,duration:10,tax_category:"bonds_other"},FNMIX:{name:"Fidelity New Markets Income Fund",start_year:1993,early_replacement:"ONES",early_monthly_index_replacement:null,suggest_in_search:!1,duration:6,tax_category:"bonds_other"},VWOB:{name:"Vanguard Emerging Markets Government Bond Index Fund",start_year:2013,early_replacement:"PCY",early_monthly_index_replacement:null,suggest_in_search:!1,duration:8,tax_category:"bonds_other"},GLD:{name:"Gold",name_full:"SPDR Gold Shares",start_year:2004,early_replacement:null,early_monthly_index_replacement:"gold_bullion.csv",suggest_in_search:!0,tax_category:"collectibles"}}),I=function(e){Object(g.a)(a,e);var t=Object(y.a)(a);function a(e){var n;Object(p.a)(this,a),(n=t.call(this,e)).search_options=[],n.display_name_to_ticker={},n.ticker_to_display_name={};for(var r=0,l=Object.entries(w);r<l.length;r++){var s=l[r],o=s[0],i=s[1];if(i.suggest_in_search){var c="".concat(i.name," (").concat(o,")");n.search_options.push({ticker:o,name:i.name,category:i.tax_category,display_name:c}),n.display_name_to_ticker[c]=o,n.ticker_to_display_name[o]=c}}return n.search_options.sort(function(e,t){return e.category>t.category?1:e.category<t.category?-1:e.ticker>t.ticker?1:e.ticker<t.ticker?-1:void 0}),n}return Object(h.a)(a,[{key:"sanitize_input_and_handle_update",value:function(e,t){if("input"===e)this.props.handle_holding_update(t);else if("clear"===e)this.props.handle_holding_update("");else if("reset"===e){var a=this.display_name_to_ticker[t];void 0!==a&&(console.log("ticker",a),this.props.handle_holding_update(a))}}},{key:"render",value:function(){var e=this;return r.a.createElement(M.a,{freeSolo:!0,options:this.search_options,groupBy:function(e){return e.category},renderOption:function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"ticker_span"},e.ticker),r.a.createElement("span",null,e.name))},getOptionLabel:function(e){return e.display_name},inputValue:this.props.ticker in this.ticker_to_display_name?this.ticker_to_display_name[this.props.ticker]:this.props.ticker,classes:{root:"ticker_selector_root",inputRoot:"ticker_selector_inputroot",input:"ticker_selector_input",popper:"ticker_selector_popper"},onInputChange:function(t,a,n){e.sanitize_input_and_handle_update(n,a)},renderInput:function(e){return r.a.createElement(O.a,Object.assign({},e,{margin:"none",variant:"filled",type:"text",size:"small",inputProps:Object(m.a)(Object(m.a)({},e.inputProps),{},{autoComplete:"new-password"})}))}})}}]),a}(r.a.Component),V=a(59),C=a.n(V);a(136);var j=function(e){Object(g.a)(a,e);var t=Object(y.a)(a);function a(e){return Object(p.a)(this,a),t.call(this,e)}return Object(h.a)(a,[{key:"render",value:function(){var e=this,t=this.props.config.leverage,a=this.props.config.borrowing_costs_above_libor,n=this.props.config.start_year,l=null;return t>1&&(l=[r.a.createElement("div",{key:"borrow",className:"col-xl-6 col-lg-4 col-md-6 col-sm-6 col-xs-12"},r.a.createElement("div",{className:"input-group input-group-sm mb-1"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text tax_type_name"},"Margin rate (+LIBOR)")),r.a.createElement("input",{className:"form-control rem-5"+(a>=0&&a<100?"":"is-invalid"),type:"number",name:"borrowing_costs_above_libor",min:0,max:100,step:.01,value:a,onChange:function(t){return e.props.handle_config_update(t)}}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("span",{className:"input-group-text"},"%")),r.a.createElement("div",{className:"invalid-feedback"},"Borrowing costs have to be between 0% and 100%.")))]),r.a.createElement("div",{className:"row width-95"},r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"row inner_config_row pt-4"},r.a.createElement("div",{className:"col-xl-6 col-lg-4 col-md-6 col-sm-6 col-xs-12"},r.a.createElement("div",{className:"input-group input-group-sm mb-1"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text"},"Start Year ")),r.a.createElement("input",{className:"form-control "+(n>=1980&&n<2018?"":"is-invalid"),type:"number",name:"start_year",min:"1980",max:"2018",step:1,value:n,onChange:function(t){return e.props.handle_config_update(t)}}),r.a.createElement("div",{className:"invalid-feedback"},"Start year has to be between 1980 and 2018."))),r.a.createElement("div",{className:"col-xl-6 col-lg-4 col-md-6 col-sm-6 col-xs-12"},r.a.createElement("div",{className:"input-group input-group-sm mb-1"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text"},"Holding while in Cash")),r.a.createElement(I,{ticker:this.props.config.money_market_holding,handle_holding_update:function(t){return e.props.handle_mmh_update(t)}}))),r.a.createElement("div",{className:"col-xl-6 col-lg-4 col-md-6 col-sm-6 col-xs-12"},r.a.createElement("div",{className:"input-group input-group-sm mb-1"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text"},"Leverage ")),r.a.createElement("input",{className:"form-control "+(t>0&&t<4?"":"is-invalid"),type:"number",name:"leverage",min:"0",max:"4",step:.01,value:t,onChange:function(t){return e.props.handle_config_update(t)}}),r.a.createElement("div",{className:"invalid-feedback"},"Leverage has to be between 0 and 4."))),l,r.a.createElement("div",{className:"col-xl-6 col-lg-4 col-md-6 col-sm-6 col-xs-12"},r.a.createElement("div",{className:"btn-group btn-group-sm btn-group-toggle mb-1 dual_mom_buttons input-group input-group-sm","data-toggle":"buttons"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text"},"Simulate Taxes: ")),r.a.createElement("label",{className:"btn "+(this.props.config.simulate_taxes?"btn-primary active":"btn-outline-secondary")},r.a.createElement("input",{type:"radio",name:"simulate_taxes",onChange:function(t){return e.props.handle_config_update(t)}}),"Yes"),r.a.createElement("label",{className:"btn "+(this.props.config.simulate_taxes?"btn btn-outline-secondary":"btn-primary active")},r.a.createElement("input",{type:"radio",name:"simulate_taxes",onChange:function(t){return e.props.handle_config_update(t)}}),"No")))),r.a.createElement(A,{key:0,config:this.props.config,handle_config_update:function(t){return e.props.handle_config_update(t)},handle_tax_rate_update:function(t,a){return e.props.handle_tax_rate_update(t,a)}})))}}]),a}(r.a.Component),A=function(e){Object(g.a)(a,e);var t=Object(y.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).config_to_name={fed_st_gains:"Federal Short Term Cap Gains",state_st_gains:"State Short Term Cap Gains",fed_lt_gains:"Federal Long Term Cap Gains",state_lt_gains:"State Long Term Cap Gains"},n}return Object(h.a)(a,[{key:"render",value:function(){var e=this;if(this.props.config.simulate_taxes){for(var t=[],a=function(){var a=Object(d.a)(l[n],2),s=a[0],o=(a[1],e.config_to_name[s]),i=e.props.config.tax_rates[s];t.push(r.a.createElement("div",{key:s,className:"col-xl-6 col-lg-4 col-md-6 col-sm-12 col-xs-12"},r.a.createElement("div",{className:"tax_rate_selector input-group input-group-sm"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text tax_type_name"},o)),r.a.createElement("input",{className:"form-control rem-5 "+(i>=0&&i<=100?"":"is-invalid"),type:"number",name:s,min:"0",max:"100",value:i,onChange:function(t){return e.props.handle_tax_rate_update(s,t.target.value)}}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("span",{className:"input-group-text"},"%")),r.a.createElement("div",{className:"invalid-feedback"},"Tax percentage needs to be between 0 and 100."))))},n=0,l=Object.entries(this.props.config.tax_rates);n<l.length;n++)a();return r.a.createElement("div",{className:"row inner_config_row"},t)}return null}}]),a}(r.a.Component),R=function(e){Object(g.a)(a,e);var t=Object(y.a)(a);function a(e){return Object(p.a)(this,a),t.call(this,e)}return Object(h.a)(a,[{key:"render",value:function(){var e=this;if(!("weight"in this.props.config))return r.a.createElement("div",{className:"col-xl-6 col-lg-4 col-md-4 col-sm-6 col-xs-12"},r.a.createElement("input",{className:"component_title form-control component_title_new",type:"text",name:"name",maxLength:"14",size:"14",disabled:!0,value:this.props.config.name}),r.a.createElement("div",{className:"input-group input-group-sm mb-1"},r.a.createElement("input",{className:"form-control ",type:"text",name:"name",maxLength:"14",size:"14",value:this.props.config.name,onChange:function(t){return e.props.handle_component_update(t)}}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("button",{className:"btn btn-primary active",type:"button",name:"add_component",onClick:function(t){return e.props.handle_component_update(t)}},"Add Component"))));var t,a=[],n=Object(u.a)(this.props.config.holdings.entries());try{var l=function(){var n=Object(d.a)(t.value,2),l=n[0],s=n[1];a.push(r.a.createElement(I,{key:l,ticker:s,handle_holding_update:function(t){return e.props.handle_holding_update(l,t)}}))};for(n.s();!(t=n.n()).done;)l()}catch(s){n.e(s)}finally{n.f()}return this.props.config.dual_momentum||(a=a.slice(0,1)),r.a.createElement("div",{className:"col-xl-6 col-lg-4 col-md-4 col-sm-6 col-xs-12 pb-2"},r.a.createElement("input",{className:"component_title form-control",type:"text",name:"name",maxLength:"14",size:"14",value:this.props.config.name,onChange:function(t){return e.props.handle_component_update(t)}}),r.a.createElement("div",{className:"btn-group btn-group-sm btn-group-toggle mb-1 dual_mom_buttons","data-toggle":"buttons"},r.a.createElement("label",{className:this.props.config.dual_momentum?"btn btn-primary active":"btn btn-outline-secondary"},r.a.createElement("input",{type:"radio",name:"dual_momentum",onChange:function(t){return e.props.handle_component_update(t)}}),"Dual Momentum"),r.a.createElement("label",{className:this.props.config.dual_momentum?"btn btn-outline-secondary":"btn btn-primary active"},r.a.createElement("input",{type:"radio",name:"dual_momentum",onChange:function(t){return e.props.handle_component_update(t)}}),"Buy and Hold")),r.a.createElement("div",{className:"input-group input-group-sm mb-1"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text"},"Number of holdings: ")),r.a.createElement("input",{className:"form-control"+([1,2].includes(this.props.config.max_holdings)||!this.props.config.dual_momentum?"":" is-invalid"),disabled:!this.props.config.dual_momentum,type:"number",name:"max_holdings",min:"1",max:"2",value:this.props.config.dual_momentum?this.props.config.max_holdings:"",onChange:function(t){return e.props.handle_component_update(t)}}),r.a.createElement("div",{className:"invalid-feedback"},"Number of holdings per category has to be 1 or 2.")),r.a.createElement("div",{className:"input-group input-group-sm mb-1"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text rem-6"},"Lookback: ")),r.a.createElement("input",{className:!this.props.config.dual_momentum||this.props.config.lookback>=1&&this.props.config.lookback<=24?"form-control":"form-control is-invalid",disabled:!this.props.config.dual_momentum,type:"number",name:"lookback",min:"1",max:"24",value:this.props.config.dual_momentum?this.props.config.lookback:"",onChange:function(t){return e.props.handle_component_update(t)}}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("span",{className:"input-group-text"},"months")),r.a.createElement("div",{className:"invalid-feedback"},"Lookback has to be between 1 and 24 months.")),r.a.createElement("div",{className:"mb-1"},r.a.createElement("div",{className:"input-group input-group-sm"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text rem-6"},"Weight: ")),r.a.createElement("input",{className:1===this.props.total_allocated_weight?"form-control":"form-control is-invalid",type:"number",name:"weight",min:"0",max:"100",value:100*this.props.config.weight,onChange:function(t){return e.props.handle_component_update(t)}}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("span",{className:"input-group-text"},"%")),r.a.createElement("div",{className:"invalid-feedback"},"Total weights need to add to 100%."))),r.a.createElement("div",{className:"ticker_list"},r.a.createElement("div",null,r.a.createElement("div",{className:"input-group input-group-sm"},r.a.createElement("div",{className:"input-group-prepend ticker_list_heading"},r.a.createElement("span",{className:"input-group-text ticker_list_heading"},"Ticker List:"))),r.a.createElement("div",{className:"holding_boxes"},a))),this.props.config.dual_momentum||0===this.props.config.holdings.length?r.a.createElement("button",{type:"button",className:"btn btn-sm btn-outline-primary",onClick:function(){return e.props.modify_number_of_holdings(1)}},"Add Ticker"):null,r.a.createElement("button",{type:"button",className:"btn btn-sm btn-outline-primary button_remove",onClick:function(){return e.props.modify_number_of_holdings(-1)}},"Remove ",this.props.config.holdings.length>0?"Ticker":"Part"))}}]),a}(r.a.Component),G=function(e){Object(g.a)(a,e);var t=Object(y.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state={data:null,config_is_valid:!0,dm_config:{data_load_error:void 0,config_hash:void 0,costs_per_trade:.1,start_year:1980,leverage:1,borrowing_costs_above_libor:1.5,simulate_taxes:!0,tax_rates:{fed_st_gains:22,state_st_gains:12,fed_lt_gains:15,state_lt_gains:5.1},money_market_holding:"VGIT",momentum_leverages:{months_for_leverage:3,config:{.8:-.3,.85:-.3,.9:-.2,.95:-.2,1.3:.2,1.2:.1,1.15:.1,1.1:0,1.05:0}}},dm_components:[{name:"Equities",weight:.25,dual_momentum:!0,lookback:12,max_holdings:1,holdings:["VTI","IEFA","IEMG",""]},{name:"REITs",weight:.25,dual_momentum:!0,lookback:12,max_holdings:1,holdings:["VNQ","REM",""]},{name:"Bonds",weight:.25,dual_momentum:!0,lookback:12,max_holdings:1,holdings:["LQD","HYG",""]},{name:"Safety",weight:.25,dual_momentum:!0,lookback:12,max_holdings:1,holdings:["TLT","GLD",""]},{name:""}]},n.csrftoken=function(e){var t;if(document.cookie&&""!==document.cookie){var a,n=document.cookie.split(";"),r=Object(u.a)(n);try{for(r.s();!(a=r.n()).done;){var l=a.value.trim();if(l.substring(0,e.length+1)===e+"="){t=decodeURIComponent(l.substring(e.length+1));break}}}catch(s){r.e(s)}finally{r.f()}}return t}("csrftoken"),n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){this.load_result_data()}},{key:"handle_config_update",value:function(e){console.log(e);var t=Object(m.a)({},this.state.dm_config),a=e.target.name;"simulate_taxes"===a?t.simulate_taxes=!t.simulate_taxes:"start_year"===a?t[a]=parseInt(e.target.value):"borrowing_costs_above_libor"!==a&&"leverage"!==a||(t[a]=parseFloat(e.target.value)),this.setState({dm_config:t})}},{key:"handle_tax_rate_update",value:function(e,t){var a=Object(m.a)({},this.state.dm_config),n=Object(m.a)({},a.tax_rates);n[e]=parseFloat(t),a.tax_rates=n,this.setState({dm_config:a})}},{key:"handle_mmh_update",value:function(e){var t=Object(m.a)({},this.state.dm_config);t.money_market_holding=e,this.setState({dm_config:t})}},{key:"handle_holding_update",value:function(e,t,a){var n=Object(_.a)(this.state.dm_components),r=Object(m.a)({},n[e]),l=Object(_.a)(n[e].holdings);l[t]=a,console.log("t",a),console.log(w);var s=(a in w||""===a)&&this.state.config_is_valid;r.holdings=l,n[e]=r,this.setState({dm_components:n,config_is_valid:s})}},{key:"handle_component_update",value:function(e,t){if("add_component"===t.target.name)this.modify_number_of_components(1,null);else{var a=Object(_.a)(this.state.dm_components),n=Object(m.a)({},a[e]);"dual_momentum"===t.target.name?n.dual_momentum=!n.dual_momentum:"weight"===t.target.name?n[t.target.name]=parseFloat(t.target.value)/100:"lookback"===t.target.name||"max_holdings"===t.target.name?n[t.target.name]=parseInt(t.target.value):"name"===t.target.name&&(n[t.target.name]=t.target.value),a[e]=n,this.setState({dm_components:a})}}},{key:"modify_number_of_components",value:function(e,t){var a=Object(_.a)(this.state.dm_components);if(1===e){var n=Object(m.a)({},a[a.length-1]),r=a[a.length-1].name;""===r&&(r="Component ".concat(a.length)),n={name:r,weight:0,dual_momentum:!0,lookback:12,max_holdings:1,holdings:[""]},a[a.length-1]=n,a.push({name:""})}else a=a.slice(0,t).concat(a.slice(t+1));this.setState({dm_components:a})}},{key:"modify_number_of_holdings",value:function(e,t){var a=Object(_.a)(this.state.dm_components),n=Object(m.a)({},a[t]),r=Object(_.a)(n.holdings);if(1===e)r.push(""),n.holdings=r,a[t]=n;else{if(!(r.length>0))return void this.modify_number_of_components(-1,t);r=n.dual_momentum?r.slice(0,-1):[],n.holdings=r,a[t]=n}this.setState({dm_components:a})}},{key:"load_result_data",value:function(){var e=Object(c.a)(i.a.mark(function e(t){var a,n=this;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=v({dm_components:this.state.dm_components,dm_config:this.state.dm_config}),void 0!==t){e.next=6;break}return t=x.a.stringify({conf:a}),window.history.pushState(this.state.dm_config,"",t),this.load_result_data(t),e.abrupt("return");case 6:fetch("get_test_data?"+t).then(function(e){e.json().then(function(e){if(!e.data_load_error){e.data.monthly_data.forEach(function(e){e.date_str=e.date,e.date_start=new Date(e.date[0],e.date[1]),e.date_end=new Date(e.date[0],e.date[1]+1)});var t=n.state.dm_config;return t.config_hash=e.config_hash,t.data_load_error=e.data_load_error,n.setState({data:e.data,dm_config:t}),!0}console.log("error",e.data_load_error)})}).catch(function(){return console.log("error"),!1});case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e,t=this,a=0,n=Object(u.a)(this.state.dm_components.entries());try{for(n.s();!(e=n.n()).done;){var l=Object(d.a)(e.value,2),s=(l[0],l[1]);isNaN(s.weight)||(a+=s.weight)}}catch(p){n.e(p)}finally{n.f()}var o,i=[],c=Object(u.a)(this.state.dm_components.entries());try{var _=function(){var e=Object(d.a)(o.value,2),n=e[0];e[1];i.push(r.a.createElement(R,{key:n,config:Object(m.a)({},t.state.dm_components[n]),total_allocated_weight:a,handle_holding_update:function(e,a){t.handle_holding_update(n,e,a)},handle_component_update:function(e){t.handle_component_update(n,e)},modify_number_of_holdings:function(e){t.modify_number_of_holdings(e,n)}}))};for(c.s();!(o=c.n()).done;)_()}catch(p){c.e(p)}finally{c.f()}return r.a.createElement("div",{className:"container-fluid"},r.a.createElement("h1",{className:"display-2"},"Dual Momentum Backtester"),r.a.createElement("div",{className:"row",id:"config_and_chart_row"},r.a.createElement("div",{className:"col-xl-6"},r.a.createElement("div",{className:"row mt-4 config_row",id:"components_row"},r.a.createElement("div",{className:"config_header"},r.a.createElement("span",null,"CONFIG")),r.a.createElement(j,{config:Object(m.a)({},this.state.dm_config),handle_config_update:function(e){return t.handle_config_update(e)},handle_tax_rate_update:function(e,a){return t.handle_tax_rate_update(e,a)},handle_mmh_update:function(e){return t.handle_mmh_update(e)}})),r.a.createElement("div",{className:"row mt-4 config_row",id:"components_row"},r.a.createElement("div",{className:"config_header"},r.a.createElement("span",null,"COMPONENTS")),r.a.createElement("div",{className:"row width-95"},i))),r.a.createElement("div",{className:"col-xl-6"},r.a.createElement("div",{className:"row",id:"chart_row"},r.a.createElement("div",{id:"chart_container"},r.a.createElement(S,{data:this.state.data,data_load_error:this.state.dm_config.data_load_error,config_hash:this.state.dm_config.config_hash,width:800,height:Math.max(400,window.innerHeight/3)}))),r.a.createElement("div",{id:"summary_container"},r.a.createElement(T,{data:this.state.data,simulate_taxes:this.state.dm_config.simulate_taxes})))))}},{key:"update_url_if_no_change_after_2seconds",value:function(e){var t=v({dm_components:this.state.dm_components,dm_config:this.state.dm_config}),a=this.validate_config();if(e===t&&a){var n=x.a.stringify({conf:t});window.history.pushState(this.state.dm_config,"",n),this.load_result_data(n)}}},{key:"validate_config",value:function(){var e,t=[],a=Object(u.a)(this.state.dm_components);try{for(a.s();!(e=a.n()).done;){var n=e.value;if(""!==n.name){var r,l=Object(u.a)(n.holdings);try{for(l.s();!(r=l.n()).done;){var s=r.value;s in w||""===s||t.push("".concat(s," in ").concat(n.name," is not a valid holding."))}}catch(o){l.e(o)}finally{l.f()}}}}catch(o){a.e(o)}finally{a.f()}return this.state.dm_config.money_market_holding in w||t.push("Money market holding (".concat(this.state.dm_config.money_market_holding," is not a\n            valid holding.")),console.log("errors",t),0===t.length}},{key:"componentDidUpdate",value:function(e,t,a){var n=this;if(!C()(t.dm_components,this.state.dm_components)||!C()(t.dm_config,this.state.dm_config)){var r=v({dm_components:this.state.dm_components,dm_config:this.state.dm_config});setTimeout(function(){n.update_url_if_no_change_after_2seconds(r)},2e3)}}}]),a}(r.a.Component);window.app_modules={React:r.a,ReactDOM:s.a,MainView:G}},90:function(e,t,a){e.exports=a(137)},96:function(e,t,a){}},[[90,1,2]]]);
//# sourceMappingURL=main.chunk.js.map